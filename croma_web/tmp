 D = [
    { itemID: "".concat(e[
            0
        ]), quantity: "1"
    },
    { itemID: "".concat(e[
            1
        ]), quantity: "1"
    }
]
} else D = []; if (s !== w.a.giftProductId && s !== w.a.donateProductId) for (let t = 0; t < N.length; t++) { var u, v, y, E, h, I, O, b; if ("Y" === S) { if ("HDEL" !== N[t
    ]) continue
} else if ("STOR" === N[t
] && "LA" === g) continue; const a = { fulfillmentType: "".concat(N[t
    ]), order_type: m, itemID: "".concat(s), lineId: "".concat(f + 1), reEndDate: "2500-01-01", reqStartDate: "", requiredQty: "".concat(p), shipToAddress: { company: "", country: "", city: "", mobilePhone: "", state: "", lat: (null === e || void 0 === e || null === (u = e.shippingAddress) || void 0 === u || null === (v = u.gpsCoordinates) || void 0 === v ? void 0 : v.latitude) ? null === e || void 0 === e || null === (y = e.shippingAddress) || void 0 === y || null === (E = y.gpsCoordinates) || void 0 === E ? void 0 : E.latitude : "", lon: (null === e || void 0 === e || null === (h = e.shippingAddress) || void 0 === h || null === (I = h.gpsCoordinates) || void 0 === I ? void 0 : I.longitude) ? null === e || void 0 === e || null === (O = e.shippingAddress) || void 0 === O || null === (b = O.gpsCoordinates) || void 0 === b ? void 0 : b.longitude : "", zipCode: "".concat("undefined" !== typeof Storage && JSON.parse(localStorage.getItem("3hrPincode"))), extn: { irlAddressLine1: "", irlAddressLine2: ""
        }
    }, extn: { widerStoreFlag: S
    }, zpactItems: D
}; f += 1, _.push(a)
}
} Object(z.i)(_).then(e => { var t, a, l, o, n; "success" === e.status ? (r(!0), p(e.data), g(e.data), (null === e || void 0 === e ? void 0 : e.data) && (null === e || void 0 === e || null === (t = e.data) || void 0 === t || null === (a = t.promise) || void 0 === a || null === (l = a.suggestedOption) || void 0 === l || null === (o = l.option) || void 0 === o || null === (n = o.promiseLines) || void 0 === n ? void 0 : n.promiseLine) && e.data.promise.suggestedOption.option.promiseLines.promiseLine.map(e => { var t, a, l, o, n, i, r, d, c, u, v, m, p, g, f, y, E, h; "CromaTransportService" == e.scac && 1 == e.zipEnabledInTMS && "HDEL" == e.fulfillmentType ? (B(null === e || void 0 === e || null === (t = e.assignments) || void 0 === t || null === (a = t.assignment[
    0
]) || void 0 === a ? void 0 : a.deliveryDates), W(null === e || void 0 === e || null === (l = e.assignments) || void 0 === l || null === (o = l.assignment[
    0
]) || void 0 === o || null === (n = o.deliveryDates[
    null === (r = s[Je
    ]) || void 0 === r ? void 0 : r.dateId
]) || void 0 === n || null === (i = n.deliveryDate) || void 0 === i ? void 0 : i.slotDate), q(null === e || void 0 === e || null === (d = e.assignments) || void 0 === d || null === (c = d.assignment[
    0
]) || void 0 === c || null === (u = c.deliveryDates[
    null === (m = s[Je
    ]) || void 0 === m ? void 0 : m.dateId
]) || void 0 === u || null === (v = u.deliveryDate) || void 0 === v ? void 0 : v.slots[
    null === (p = s[Je
    ]) || void 0 === p ? void 0 : p.timeId
]), H(null === e || void 0 === e || null === (g = e.assignments) || void 0 === g || null === (f = g.assignment[
    0
]) || void 0 === f || null === (y = f.deliveryDates[
    null === (h = s[Je
    ]) || void 0 === h ? void 0 : h.dateId
]) || void 0 === y || null === (E = y.deliveryDate) || void 0 === E ? void 0 : E.slots)) : ie(!1)
}), De(m.a.TMS_API_FAIL_MESSAGE, m.a.ERROR), setTimeout(() => { S(!0)
},
3500)) : (sessionStorage.calledFromTDNative && Object(N.k)("ERROR", e.statusCode,
"",
"",
{ service_name: "fetchCheckoutShippingOptionData"
}), p(), g({ STOR: { status: !1, selected: !1, products: []
}, SDEL: { status: !1, selected: !1, products: []
}, HDEL: { status: !1, selected: !1, products: []
}
}))
}).catch(() => { p(), g({ STOR: { status: !1, selected: !1, products: []
}, SDEL: { status: !1, selected: !1, products: []
}, HDEL: { status: !1, selected: !1, products: []
}
})
})
}
})(), sessionStorage.calledFromTDNative && Object(N.k)("ERROR", l.statusCode,
"",
"",
{ service_name: "reserveSlot"
}), console.log("error")
}).catch(() => { console.log("err")
})
}, _e = (e, t) => { var a, l, o, n; return (null === e || void 0 === e || null === (a = e.deliveryDate) || void 0 === a || null === (l = a.slots[
0
]) || void 0 === l ? void 0 : l.available) || (null === e || void 0 === e || null === (o = e.deliveryDate) || void 0 === o || null === (n = o.slots[
1
]) || void 0 === n ? void 0 : n.available) ? (null === D || void 0 === D ? void 0 : D.slot) === t ? "slt - box - select slt - bx": "slt - bx": "slt - bx slt - disable"
}, De = function (e, t) { let a = arguments.length > 2 && void 0 !== arguments[
2
] && arguments[
2
]; A(t), L(e), a && localStorage.setItem("setAutoHide", a), P.current && P && P.current && P.current.openToast()
}; return o.a.createElement(o.a.Fragment,
null, o.a.createElement(y.a,
{ classes: { paper: "mini - cart - dailog"
}, open: h, disableEscapeKeyDown: !0
}, o.a.createElement(E.a,
null, o.a.createElement("div",
{ className: "mini - cart - product - container slot - modal"
}, o.a.createElement("div",
{ className: "mini - cart - style"
}, o.a.createElement("div",
null, te ? 1 == (null === d || void 0 === d ? void 0 : d.length) ? o.a.createElement("div",
{ className: "slot - heading pay - slot - head"
},
"DELIVERY SLOT UNAVAILABLE", o.a.createElement("p",
{ className: "unavl"
},
"Delivery slot selected is no longer available.")) : o.a.createElement("div",
{ className: "slot - heading pay - slot - head"
},
"DELIVERY SLOTS UNAVAILABLE", o.a.createElement("p",
{ className: "unavl"
},
"Delivery slots selected are no longer available.")) : null, o.a.createElement("div",
{ className: "slot - sec - head"
}, o.a.createElement("div",
{ className: "slt - sub - head"
},
"Please reselect new delivery schedule", o.a.createElement("span",
{ class: "text - style - 1"
},
"(", Je + 1,
" / ",
null === d || void 0 === d ? void 0 : d.length,
")")), o.a.createElement("div",
{ className: "slt - mod - container"
}, (null === d || void 0 === d ? void 0 : d.length) > 1 && o.a.createElement("div",
{ class: "prev - slt - pay", id: "left", onClick: () => { if (ae(!1),
0 !== Je) { var e, t, a, l, o, n, i, r, c; Je -= 1, oe(d[Je
]), C({ time: null === (e = s[Je
]) || void 0 === e ? void 0 : e.timeId, slot: null === (t = s[Je
]) || void 0 === t ? void 0 : t.dateId
}), W(null === (a = M[
null === (o = s[Je
]) || void 0 === o ? void 0 : o.dateId
]) || void 0 === a || null === (l = a.deliveryDate) || void 0 === l ? void 0 : l.slotDate), q(null === (n = M[
null === (r = s[Je
]) || void 0 === r ? void 0 : r.dateId
]) || void 0 === n || null === (i = n.deliveryDate) || void 0 === i ? void 0 : i.slots[
null === (c = s[Je
]) || void 0 === c ? void 0 : c.timeId
]); let u = document.getElementById("right"); if (u && u.classList.remove("disable"),
0 == Je) { let e = document.getElementById("left"); e && e.classList.remove("active")
}
}
}
},
"\u276e"), o.a.createElement("div",
{ className: "slt - mod - img"
}, o.a.createElement("img",
{ src: Object(k.c)(null === le || void 0 === le || null === (t = le.product) || void 0 === t || null === (a = t.images[
0
]) || void 0 === a ? void 0 : a.url)
})), o.a.createElement("div",
{ className: "slt - mod - txt"
}, le && (null === le || void 0 === le || null === (n = le.product) || void 0 === n ? void 0 : n.name)), (null === d || void 0 === d ? void 0 : d.length) > 1 && o.a.createElement("div",
{ class: "next - slt - pay", id: "right", onClick: Oe
},
"\u276f")))), o.a.createElement("div",
{ className: "slot - sub - heading pay - slot - sub - head"
},
"Select Date"), o.a.createElement("div",
{ className: "date - wrapper dt - wrapper - pay"
},
null === M || void 0 === M ? void 0 : M.map((e, t) => { var a, l, n, i; return o.a.createElement("div",
{ className: _e(e, t), onClick: () => { var a, l, o, n; ((null === e || void 0 === e || null === (a = e.deliveryDate) || void 0 === a || null === (l = a.slots[
0
]) || void 0 === l ? void 0 : l.available) || (null === e || void 0 === e || null === (o = e.deliveryDate) || void 0 === o || null === (n = o.slots[
1
]) || void 0 === n ? void 0 : n.available)) && ((e, t) => { var a, l, o, n, i, r, d, s; let c; ae(!1), W(null === e || void 0 === e || null === (a = e.deliveryDate) || void 0 === a ? void 0 : a.slotDate), (null === e || void 0 === e || null === (l = e.deliveryDate) || void 0 === l || null === (o = l.slots[
0
]) || void 0 === o ? void 0 : o.available) ? c = 0 : (null === e || void 0 === e || null === (n = e.deliveryDate) || void 0 === n || null === (i = n.slots[
1
]) || void 0 === i ? void 0 : i.available) && (c = 1), localStorage.setItem("slotTime", JSON.stringify(null === e || void 0 === e || null === (r = e.deliveryDate) || void 0 === r ? void 0 : r.slots[c
])), q(null === e || void 0 === e || null === (d = e.deliveryDate) || void 0 === d ? void 0 : d.slots[c
]), H(null === e || void 0 === e || null === (s = e.deliveryDate) || void 0 === s ? void 0 : s.slots), C({ time: c, slot: t
})
})(e, t)
}
}, (e => { var t; let a = new Date(null === e || void 0 === e || null === (t = e.deliveryDate) || void 0 === t ? void 0 : t.slotDate); a = a.toUTCString(), pe = a.substring(0,
3).toUpperCase(), ge = a.substring(5,
7), fe = a.substring(8,
11).toUpperCase()
})(e), (null === e || void 0 === e || null === (a = e.deliveryDate) || void 0 === a || null === (l = a.slots[
0
]) || void 0 === l ? void 0 : l.available) || (null === e || void 0 === e || null === (n = e.deliveryDate) || void 0 === n || null === (i = n.slots[
1
]) || void 0 === i ? void 0 : i.available) ? null : o.a.createElement("div",
{ class: "Oval"
}), o.a.createElement("div",
{ className: "dy - mnt - text"
}, pe), o.a.createElement("div",
{ className: "dt - txt"
}, ge), o.a.createElement("div",
{ className: "dy - mnt - text"
}, fe))
})), o.a.createElement("div",
{ className: "slt - exp"
}, o.a.createElement("div",
{ class: "Oval1"
}), o.a.createElement("div",
null,
"Slot Full")), o.a.createElement("div",
{ className: "nt - txt - pay"
},
"Note: You can schedule / reschedule delivery within 15 days from the order date")), o.a.createElement("button",
{ className: re ? "card - button btn btn -default slt - btn - mob": "btn btn - secondary disabled - modal - button slt - btn - mob", onClick: () => { var e; return Ne(null === le || void 0 === le || null === (e = le.product) || void 0 === e ? void 0 : e.code,
"N")
}, disabled: !re
},
"Confirm")))), o.a.createElement(y.a,
{ open: b, onClose: Se, classes: { paper: "mini - cart - dailog"
}
}, o.a.createElement(E.a,
null, o.a.createElement("div",
{ className: "conf - modal"
},
1 == (null === d || void 0 === d ? void 0 : d.length) ? o.a.createElement("div",
{ className: "conf - modal - head"
},
"NEW DELIVERY SLOT SELECTED FOR BELOW PRODUCT") : o.a.createElement("div",
{ className: "conf - modal - head"
},
"NEW DELIVERY SLOT SELECTED FOR BELOW PRODUCTS"), s.map(e => o.a.createElement("div",
{ className: "slt - conf - mod - container"
}, o.a.createElement("div",
{ className: "slt - conf - mod - img"
}, o.a.createElement("img",
{ src: Object(k.c)(e.imgURL)
})), o.a.createElement("div",
{ className: "slt - conf - mod - txt"
}, o.a.createElement("div",
{ className: "conf - mod - txt - ln"
},
"Delivery Slot"), o.a.createElement("div",
{ className: "conf - mod - txt - ln"
}, e.date)))), o.a.createElement("div",
{ className: "action - wrap - conf"
}, o.a.createElement("button",
{ className: "btn btn -default conf - btn", onClick: Se
},
"Confirm"), o.a.createElement("button",
{ className: "btn btn - secondary conf - btn", onClick: () => { var e, t; _(!1), S(!0), Je = 0, oe(d[
0
]), C({ time: null === (e = s[
0
]) || void 0 === e ? void 0 : e.timeId, slot: null === (t = s[
0
]) || void 0 === t ? void 0 : t.dateId
}), O(!0)
}
},
"Change"))))), o.a.createElement(Ve.a,
{ ref: P, varient: T, msg: R
}))
}, Ye = a(29), qe = a(422), Ke = a(828); var ze = a(86), Ze = a(45), Qe = a(923), Xe = a(102), $e = a(916); const et = o.a.memo((function (e) { var t, a, u, g, h, S, I; let { callOfferMsd: O, cartData: b, cartRes: _, isDesktop: D, neuPassInfo: C, historyPayment: P, retryPayment: T, neuPassInfoData: A, retryPaymentOfferData: R, setRetryPaymentOfferData: L, showToastMsg: F
} = e; const j = Object(ae.useHistory)(),
[x, M
] = o.a.useState(!1),
[B, G
] = o.a.useState(),
[V, J
] = o.a.useState(),
[K, Z
] = o.a.useState({}),
[Q, X
] = o.a.useState(),
[$, ee
] = o.a.useState(""),
[te, le
] = o.a.useState("Select"),
[oe, ne
] = o.a.useState("panel2"),
[ie, re
] = o.a.useState([]),
[de, se
] = o.a.useState(),
[ce, ve
] = o.a.useState(""),
[pe, fe
] = o.a.useState(""),
[Ee, he
] = o.a.useState(""),
[Ie, _e
] = o.a.useState(!1),
[Re, xe
] = o.a.useState(!1),
[Me, Be
] = o.a.useState({ message: "", type: ""
}),
[Ve, Ue
] = o.a.useState(""),
[He, Je
] = o.a.useState(!1),
[ze, Ze
] = o.a.useState(),
[Qe, Xe
] = o.a.useState(!0),
[$e, et
] = o.a.useState(""),
[tt, at
] = o.a.useState(""),
[lt, ot
] = o.a.useState(""),
[nt, it
] = o.a.useState(!1),
[rt, dt
] = o.a.useState(!1),
[st, ct
] = o.a.useState(!1),
[ut, vt
] = o.a.useState(!1),
[mt, pt
] = o.a.useState([]),
[gt, ft
] = o.a.useState(),
[yt, Et
] = o.a.useState(!1),
[ht, St
] = o.a.useState(""),
[It, Nt
] = o.a.useState(void 0),
[Ot, bt
] = o.a.useState(""),
[_t, Dt
] = o.a.useState(-1),
[Ct, Pt
] = o.a.useState(!1),
[Tt, kt
] = o.a.useState(),
[wt, At
] = o.a.useState("none"),
[Rt, Lt
] = o.a.useState(!1),
[Ft, jt
] = o.a.useState(""),
[xt, Mt
] = o.a.useState(""),
[Bt, Gt
] = o.a.useState({}), Vt = Object(l.useCallback)(() => ((e, t, a) => { return e >= 0 ? e : (null === t || void 0 === t ? void 0 : t.loyaltypointsApplied) ? (null === t || void 0 === t || null === (l = t.totalPriceWithTaxAndNUECoins) || void 0 === l ? void 0 : l.value) || 0 : (null === a || void 0 === a || null === (o = a.totalPrice) || void 0 === o ? void 0 : o.value) || 0; var l, o
})(de, K, Bt),
[de, K, Bt
])(), Ut = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"), Ht = [], Jt = "cromaHomeDelivery" === localStorage.getItem("deliveryMode"), Wt = e => (null === e || void 0 === e ? void 0 : e.toLowerCase()) === m.a.NEUCOIN_REDEMPTION, Yt = (e, t) => { let a = ""; var l, o, n; T ? a = "".concat(e,
" / checkout / upgradejuspay / ").concat(null === P || void 0 === P || null === (l = P.state) || void 0 === l ? void 0 : l.orderId) : a = "".concat(e,
" / checkout / upgradejuspay / ").concat(null === t || void 0 === t || null === (o = t.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code); return a
}, qt = (e, t) => { let a = ""; var l; T ? a = "".concat(e,
" / checkout / ").concat(null === P || void 0 === P || null === (l = P.state) || void 0 === l ? void 0 : l.orderId,
" / paymentvalidation ? refreshCart = false") : a = "".concat(e,
" / checkout / ").concat(t,
" / paymentvalidation ? refreshCart = false"); return a
}, Kt = e => { try { if (e) { const o = "string" === typeof e ? JSON.parse(e) : e, n = o.event; var t, a, l; if (console.log(" ===== ", n, o),
"paymentAttempt" === n && null == sessionStorage.juspayCalled) (e => { var t, a, l, o, n; const i = Object(N.a)(localStorage.getItem("cr - cache: user - data"),
"token"), r = localStorage.getItem("csc_code"), d = T ? null === P || void 0 === P || null === (t = P.state) || void 0 === t ? void 0 : t.orderId : null === i || void 0 === i || null === (a = i.wishListInfo) || void 0 === a || null === (l = a.cartWsDto) || void 0 === l ? void 0 : l.code; let s = ""; var c; Ut ? s = r : s = null === i || void 0 === i || null === (c = i.customerInfo) || void 0 === c ? void 0 : c.customerHash; sessionStorage.juspayCalled = !0,
"tatapaylater" === (null === e || void 0 === e || null === (o = e.payload) || void 0 === o ? void 0 : o.payment_method.toLowerCase()) && (e.payload.payment_method_type = "paylater"), Le(e.payload.payment_method_type, sessionStorage.orderIDses, e.payload.payment_method,
"proceed to pay", e.payload.payment_card_issuer,
null === b || void 0 === b || null === (n = b.cartData) || void 0 === n ? void 0 : n.entries), Ne(e.payload.payment_method_type, e.payload.payment_method,
null === b || void 0 === b ? void 0 : b.cartData,
"add_payment_info"), la(s, d, e)
})(o); else "current_screen" === (null === o || void 0 === o || null === (t = o.payload) || void 0 === t ? void 0 : t.label) && "loadingscreen" !== (null === o || void 0 === o || null === (a = o.payload) || void 0 === a || null === (l = a.value) || void 0 === l ? void 0 : l.screen_name.toLowerCase()) && (e => { var t, a; if (m.a.PAYMENT_ADOBE_EVENTS.includes(null === e || void 0 === e || null === (t = e.payload) || void 0 === t || null === (a = t.value) || void 0 === a ? void 0 : a.screen_name.toLowerCase())) { var l, o, n, i, r; const t = null === e || void 0 === e || null === (l = e.payload) || void 0 === l || null === (o = l.value) || void 0 === o ? void 0 : o.screen_name.split("Screen"); "vpa" === t[
0
].toLowerCase() ? e.payload.value.screen_name = "UPI": "emiinstruments" === t[
0
].toLowerCase() ? e.payload.value.screen_name = "pay in emi": "walletlist" === t[
0
].toLowerCase() ? e.payload.value.screen_name = "wallet": e.payload.value.screen_name = t[
0
], Le(null === e || void 0 === e || null === (n = e.payload) || void 0 === n || null === (i = n.value) || void 0 === i ? void 0 : i.screen_name, sessionStorage.orderIDses,
"",
"",
"",
null === b || void 0 === b || null === (r = b.cartData) || void 0 === r ? void 0 : r.entries)
}
})(o)
} else console.log("hyperSDK is not loaded.")
} catch (o) { console.log("Error in hyperSDK response", o)
}
}, zt = { action: "initiate", merchantId: w.a.MERCHANT_ID, clientId: "croma", environment: w.a.ENVIRONMENT_PAY, integrationType: "iframe", hyperSDKDiv: "juspay_div", logLevel: "1"
}, Zt = { service: " in.juspay.hyperpay", requestId: Object(Ke.a)(), payload: zt
}, Qt = e => { try { window.hyperServiceObject.isInitialised() && (window.hyperServiceObject.process((e => ({ requestId: Object(Ke.a)(), service: " in.juspay.hyperpay", payload: null === e || void 0 === e ? void 0 : e.payload
}))(e)), console.log("enter processJusPaySdk"))
} catch (t) { console.log("OPEL Process API Error : ", t)
}
}; Object(l.useEffect)(() => { const e = localStorage.getItem("customer_hash"), t = localStorage.getItem("access_token"), a = localStorage.getItem("csc_code"); if (e && "" !== e && t && "" !== t || a && "" !== a) { var l, o; const e = Object(N.a)(localStorage.getItem("cr - cache: user - data"),
"token"); e && "" !== e && ((null === e || void 0 === e || null === (l = e.wishListInfo) || void 0 === l || null === (o = l.cartWsDto) || void 0 === o ? void 0 : o.code) || T) && ("undefined" !== typeof window && "undefined" === typeof window.PIL && (() => { if (!document.getElementById("pilScript")) { const e = document.createElement("script"); e.src = "https: //public.releases.juspay.in/hyper-sdk-web/HyperServices.js", e.clientId = "croma", e.async = !0, document.body.appendChild(e)
}
})(),
null === localStorage.getItem("gv_details") && null === localStorage.getItem("gv_type") || void 0 === localStorage.getItem("gv_details") && void 0 === localStorage.getItem("gv_type") ? xe(!0) : ct(!0), ne("panel2"), Xe(!1))
} else { const e = "function" === typeof window.cromaSso ? new window.cromaSso({ env: "sit"
}) : null; null !== e ? e.logIn("others") : "true" === localStorage.getItem("isCSC") ? Object(Fe.a)() : sessionStorage.calledFromTDNative ? Object(N.k)("ERROR",
"",
"/",
"",
{ reason: "cromaSso is null"
}) : j.push("/")
} if (null !== localStorage.getItem("gv_details") && void 0 !== localStorage.getItem("gv_details") && void 0 !== localStorage.getItem("gv_type") && null !== localStorage.getItem("gv_type")) { le(localStorage.getItem("gv_type")); const e = JSON.parse(localStorage.getItem("gv_details")); re(null === e || void 0 === e ? void 0 : e.gvDetails), se(null === e || void 0 === e ? void 0 : e.balAmountPayable), (null === e || void 0 === e ? void 0 : e.gvDetails) && e.gvDetails.length > 0 ? (_e(!0), document.getElementById("cardNo") && (document.getElementById("cardNo").value = e.gvDetails[
0
].cardNo), document.getElementById("cardPin") && (document.getElementById("cardPin").value = e.gvDetails[
0
].cardPin), document.getElementById("selectPayId") && (document.getElementById("selectPayId").disabled = !0)) : document.getElementById("selectPayId") && (document.getElementById("selectPayId").disabled = !1)
}
},
[]), Object(l.useEffect)(() => { (() => { let e = {}; try { e = new window.HyperServices, e.initiate(Zt, Kt), console.log("enter initiateJusPaySdk")
} catch (t) { console.log("OPEL Initiate API Error : ", t)
} finally { window.hyperServiceObject = e
}
})(), Jt && setTimeout(() => { localStorage.getItem("selAddr") && (localStorage.removeItem("slots"), localStorage.removeItem("sltArr"), localStorage.removeItem("expiration"), $t())
},
9e5)
},
[]); const Xt = e => { var t, a, l, o; const n = null === e || void 0 === e || null === (t = e.promise) || void 0 === t || null === (a = t.suggestedOption) || void 0 === a || null === (l = a.option) || void 0 === l || null === (o = l.promiseLines) || void 0 === o ? void 0 : o.promiseLine, i = { STOR: { status: !1, selected: !1, products: []
}, SDEL: { status: !1, selected: !1, products: []
}, HDEL: { status: !1, selected: !1, products: []
}
}; if (n && Array.isArray(n) && n.length > 0) for (let r = 0; r < n.length; r++) { const e = n[r
]; "HDEL" === e.fulfillmentType ? e && e.assignments && e.assignments.assignment && Array.isArray(e.assignments.assignment) && e.assignments.assignment.length > 0 && !e.assignments.assignment[
0
].hasOwnProperty("emptyAssignmentReason") && (i.HDEL.products.push({ id: e.itemID, option: e
}), i.HDEL.status = !0) : "STOR" === e.fulfillmentType ? e && e.assignments && e.assignments.assignment && Array.isArray(e.assignments.assignment) && e.assignments.assignment.length > 0 && !e.assignments.assignment[
0
].hasOwnProperty("emptyAssignmentReason") && (i.STOR.products.push({ id: e.itemID, option: e
}), i.STOR.status = !0) : "SDEL" === e.fulfillmentType && e && e.assignments && e.assignments.assignment && Array.isArray(e.assignments.assignment) && e.assignments.assignment.length > 0 && !e.assignments.assignment[
0
].hasOwnProperty("emptyAssignmentReason") && (i.SDEL.products.push({ id: e.itemID, option: e
}), i.SDEL.status = !0)
}
}, $t = () => { const e = JSON.parse(localStorage.getItem("selAddr")), t = _; if (t && t.entries && t.entries.length > 0) { let y = 0; const E = []; for (let h = 0; h < t.entries.length; h++) { var a, l, o, n, i; const S = t.entries[h
].product.code, I = t.entries[h
].hasOwnProperty("exchangeAmount") ? "trade-in": "normal", N = t.entries[h
].quantity, O = (null === (a = t.entries[h
].product) || void 0 === a ? void 0 : a.applianceType) ? null === (l = t.entries[h
].product) || void 0 === l ? void 0 : l.applianceType : "", b = (null === (o = t.entries[h
].product) || void 0 === o ? void 0 : o.wiiFlag) ? "Y": "N", _ = [
"HDEL",
"STOR",
"SDEL"
]; let D = []; if ("ZPAK" === (null === t || void 0 === t || null === (n = t.entries[h
]) || void 0 === n || null === (i = n.product) || void 0 === i ? void 0 : i.SAP_MATERIAL_TYPE)) { var r, d; const e = (null === t || void 0 === t || null === (r = t.entries[h
]) || void 0 === r || null === (d = r.product) || void 0 === d ? void 0 : d.SAP_BOM_DESC).split(","); D = [
{ itemID: "".concat(e[
    0
]), quantity: "1"
},
{ itemID: "".concat(e[
    1
]), quantity: "1"
}
]
} else D = []; if (S !== w.a.giftProductId && S !== w.a.donateProductId) for (let t = 0; t < _.length; t++) { var s, c, u, v, m, p, g, f; if ("Y" === b) { if ("HDEL" !== _[t
]) continue
} else if ("STOR" === _[t
] && "LA" === O) continue; const a = { fulfillmentType: "".concat(_[t
]), order_type: I, itemID: "".concat(S), lineId: "".concat(y + 1), reEndDate: "2500-01-01", reqStartDate: "", requiredQty: "".concat(N), shipToAddress: { company: "", country: "", city: "", mobilePhone: "", state: "", lat: (null === e || void 0 === e || null === (s = e.shippingAddress) || void 0 === s || null === (c = s.gpsCoordinates) || void 0 === c ? void 0 : c.latitude) ? null === e || void 0 === e || null === (u = e.shippingAddress) || void 0 === u || null === (v = u.gpsCoordinates) || void 0 === v ? void 0 : v.latitude : "", lon: (null === e || void 0 === e || null === (m = e.shippingAddress) || void 0 === m || null === (p = m.gpsCoordinates) || void 0 === p ? void 0 : p.longitude) ? null === e || void 0 === e || null === (g = e.shippingAddress) || void 0 === g || null === (f = g.gpsCoordinates) || void 0 === f ? void 0 : f.longitude : "", zipCode: "".concat("undefined" !== typeof Storage && JSON.parse(localStorage.getItem("3hrPincode"))), extn: { irlAddressLine1: "", irlAddressLine2: ""
}
}, extn: { widerStoreFlag: b
}, zpactItems: D
}; y += 1, E.push(a)
}
} Object(z.i)(E).then(e => {
"success" === e.status ? (M(!0), ft(e.data), Xt(e.data)) : (sessionStorage.calledFromTDNative && Object(N.k)("ERROR", e.statusCode,
"",
"",
{ service_name: "fetchCheckoutShippingOptionData"
}), ft(), Xt({ STOR: { status: !1, selected: !1, products: []
}, SDEL: { status: !1, selected: !1, products: []
}, HDEL: { status: !1, selected: !1, products: []
}
}))
}).catch(() => { ft(), Xt({ STOR: { status: !1, selected: !1, products: []
}, SDEL: { status: !1, selected: !1, products: []
}, HDEL: { status: !1, selected: !1, products: []
}
})
})
}
}; Object(l.useEffect)(() => { void 0 === b ? !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("checkout") : j.push("/checkout") : Object(N.k)("ERROR",
"",
"/checkout",
"",
{ reason: "cartData is undefined"
}) : (setTimeout(() => { Object(we.a)("payment method", _)
},
1e3), Z(_))
},
[b
]), Object(l.useEffect)(() => { var e; const t = []; (null === K || void 0 === K || null === (e = K.entries) || void 0 === e ? void 0 : e.length) > 0 && gt && (K.entries.map(e => { var a, l, o, n, i, r, d, s; (null === gt || void 0 === gt ? void 0 : gt.promise) && (null === gt || void 0 === gt || null === (a = gt.promise) || void 0 === a ? void 0 : a.suggestedOption) && (null === gt || void 0 === gt || null === (l = gt.promise) || void 0 === l ? void 0 : l.suggestedOption.option) && (null === gt || void 0 === gt || null === (o = gt.promise) || void 0 === o || null === (n = o.suggestedOption) || void 0 === n || null === (i = n.option) || void 0 === i ? void 0 : i.promiseLines) && (null === gt || void 0 === gt || null === (r = gt.promise) || void 0 === r || null === (d = r.suggestedOption) || void 0 === d || null === (s = d.option) || void 0 === s ? void 0 : s.promiseLines.promiseLine) && gt && gt.promise.suggestedOption.option.promiseLines.promiseLine.map(a => { var l, o, n; (null === e || void 0 === e || null === (l = e.product) || void 0 === l ? void 0 : l.code) === (null === a || void 0 === a ? void 0 : a.itemID) && "CromaTransportService" === (null === a || void 0 === a ? void 0 : a.scac) && !0 === (null === a || void 0 === a ? void 0 : a.zipEnabledInTMS) && "HDEL" === (null === a || void 0 === a ? void 0 : a.fulfillmentType) && ((null === e || void 0 === e ? void 0 : e.vasProduct) || (null === e || void 0 === e || null === (o = e.product) || void 0 === o ? void 0 : o.name.toLowerCase().includes("onsitego")) || (null === e || void 0 === e || null === (n = e.product) || void 0 === n ? void 0 : n.name.toLowerCase().includes("zopper")) || t.push(e))
})
}), X(t))
},
[K, gt
]); const ea = e => { var t, a, l; const o = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"), n = T ? null === P || void 0 === P || null === (t = P.state) || void 0 === t ? void 0 : t.orderId : null === o || void 0 === o || null === (a = o.wishListInfo) || void 0 === a || null === (l = a.cartWsDto) || void 0 === l ? void 0 : l.code; (async function (e, t) { try { const a = localStorage.getItem("customer_hash"), l = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"), o = localStorage.getItem("csc_code"), n = "undefined" !== typeof window && ("tcp" === localStorage.getItem("isTCPBody") || "true" === sessionStorage.getItem("isRedirectedFromTCP")), i = "undefined" !== typeof window && "tcp-pwa" === localStorage.getItem("userSource"), r = { cartId: t, channelName: l ? "VLE": n || i ? "TC": ""
}, d = "user/allchannels/v1/".concat(l ? o : a,
"/checkout/gcvalidation/").concat(t), s = await U.HttpService.post(d, e,
{ headers: r
}); return s.status >= 200 && s.status < 300 ? { status: "success", data: s.data
} : { status: "error", data: []
}
} catch (a) { return { status: "error", data: []
}
}
})((e => { const t = { Cards: e.map(e => ({ CardNumber: e.cardNo, CardPin: e.cardPin, CardBal: (null === e || void 0 === e ? void 0 : e.cardBal) ? e.cardBal : 0
}))
}, a = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV); return ue.a.encrypt(JSON.stringify(t), a,
{ mode: ge.a
}).toString()
})(e), n).then(e => { if ("success" === e.status) { var t; const a = null === e || void 0 === e || null === (t = e.data) || void 0 === t ? void 0 : t.gcValidationDetails.replace(/-/g,
"+").replace(/_/g,
"/"), l = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV), o = ue.a.decrypt(a, l,
{ mode: ge.a
}).toString(me.a); ta(JSON.parse(o))
}
})
}, ta = e => { var t; if ((null === e || void 0 === e || null === (t = e.cards) || void 0 === t ? void 0 : t.length) && !e.hasOwnProperty("customErrorMsg")) { if (e.cards.length && 0 === e.responseCode) { let t = []; t = e.cards.map(e => { if (e.isValid) return { cardNo: e.cardNumber, cardPin: e.cardPin, cardBal: e.balance, cardType: e.cardType, respMsg: e.responseMessage, isValid: e.isValid, cardProgramGroupType: e.cardProgramGroupType
}; Be({ message: null === e || void 0 === e ? void 0 : e.responseMessage, type: "failure"
})
}), t = t.filter(e => e), t.length && (re(t), localStorage.setItem("gv_details", JSON.stringify({ balAmountPayable: null === e || void 0 === e ? void 0 : e.balAmountPayable, gvDetails: t
})), localStorage.setItem("gv_type", te)); try { var a, l; Be({ message: null === e || void 0 === e || null === (a = e.cards[
0
]) || void 0 === a ? void 0 : a.responseMessage, type: !0 === (null === e || void 0 === e || null === (l = e.cards[
0
]) || void 0 === l ? void 0 : l.isValid) ? "success": "failure"
}), be("GiftCard",
"Success")
} catch (n) {}
} else try { var o; Be({ message: null === e || void 0 === e || null === (o = e.cards[
0
]) || void 0 === o ? void 0 : o.responseMessage, type: "failure"
}), be("GiftCard",
"Failure")
} catch (n) {}
} else Be({ message: null === e || void 0 === e ? void 0 : e.customErrorMsg, type: "failure"
})
}, aa = () => !Tt || !Tt.hasOwnProperty("allOfferSavingsData") || !(null === Tt || void 0 === Tt ? void 0 : Tt.allOfferSavingsData.some(e => "EMI" === e.benefitType)), la = (e, t, a) => { var l, o, n; const i = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"), r = T ? null === P || void 0 === P || null === (l = P.state) || void 0 === l ? void 0 : l.orderId : null === i || void 0 === i || null === (o = i.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code; Y(qt(e, t), T).then(t => { if (t.status >= 200 && t.status < 300) !0 === t.data ? na(e, r, a) : (window.hyperServiceObject.terminate(), sessionStorage.removeItem("juspayCalled"), !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart", cartPageRedirect: "redirect-to-cart"
}) : Object(N.k)("ERROR", t.status,
"/cart",
"error",
{ service_name: "fetchPaymentValidationService"
})); else if (401 === t.status) { const e = "function" === typeof window.cromaSso ? new window.cromaSso({ env: "sit"
}) : null; null !== e ? e.logIn("others") : "true" === localStorage.getItem("isCSC") ? Object(Fe.a)() : j.push("/")
} else window.hyperServiceObject.terminate(), sessionStorage.removeItem("juspayCalled"), !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart", cartPageRedirect: "error"
}) : Object(N.k)("ERROR",
"network_failure",
"/cart",
"error",
{ service_name: "fetchPaymentValidationService"
})
}).catch(e => { window.hyperServiceObject.terminate(), sessionStorage.removeItem("juspayCalled"), !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart", cartPageRedirect: "error"
}) : Object(N.k)("ERROR",
"network_failure",
"/cart",
"error",
{ service_name: "fetchPaymentValidationService"
})
})
}, oa = () => { var e; const t = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); var a; t && "" !== t && 0 === Object.keys(null === t || void 0 === t || null === (e = t.wishListInfo) || void 0 === e ? void 0 : e.cartWsDto).length && (t.wishListInfo.cartWsDto.code = null === P || void 0 === P || null === (a = P.state) || void 0 === a ? void 0 : a.orderId, localStorage.setItem("cr-cache:user-data", JSON.stringify(t)))
}, na = (e, t, a) => { var l, o; const n = null === j || void 0 === j ? void 0 : j.location; let i = ""; var r; void 0 !== n && void 0 !== (null === n || void 0 === n ? void 0 : n.state) && void 0 !== (null === n || void 0 === n ? void 0 : n.state.paymentType) && "retry" === (null === n || void 0 === n || null === (l = n.state) || void 0 === l ? void 0 : l.paymentType) && void 0 !== (null === n || void 0 === n || null === (o = n.state) || void 0 === o ? void 0 : o.orderId) ? i = "".concat(null === n || void 0 === n || null === (r = n.state) || void 0 === r ? void 0 : r.orderId,
"&userId=").concat(e) : i = "".concat(t,
"&userId=").concat(e); Object(qe.a)(); q(i,
{ clickId: Object(qe.d)(), offerId: Object(qe.e)(), affiliateId: Object(qe.c)(),
"Content-Type": "application/json"
}).then(e => { _a(), e && (200 === e.status ? (sessionStorage.paymentBack = !0, sessionStorage.removeItem("juspayCalled"), (e => { var t; let a = { requestId: Object(Ke.a)(), service: "in.juspay.hyperpay", payload: { action: "resumePayment", txnReference: null === e || void 0 === e || null === (t = e.payload) || void 0 === t ? void 0 : t.txnReference, status: !0
}
}; try { window.hyperServiceObject.process(a), oa()
} catch (l) { console.log("OPEL Process Resume API Error : ", l), window.hyperServiceObject.terminate()
}
})(a)) : (window.hyperServiceObject.terminate(), sessionStorage.removeItem("juspayCalled"), j.push("/cart")))
}).catch(e => { window.hyperServiceObject.terminate(), sessionStorage.removeItem("juspayCalled"), j.push("/cart")
})
}, ia = e => { const t = localStorage.appliedOfferPromoId; if (t) { const a = null === e || void 0 === e ? void 0 : e.offerCode.replace(/-/g,
"+").replace(/_/g,
"/"), l = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV); ue.a.decrypt(a, l,
{ mode: ge.a
}).toString(me.a) !== t && (F(m.a.TAMPER_OFFER_MSG, ye.f.ERROR), setTimeout(() => { !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) && !T ? window.location.replace("checkout") : j.push(T ? "/my-account/orders": "/checkout") : Object(N.k)("ERROR",
"", T ? "/my-account/orders": "/checkout", m.a.TAMPER_OFFER_MSG,
{ reason: "order detail validation failed."
})
},
4e3))
}
}, ra = (e, t) => { const a = []; if ("aggregator" === t) { var l, o; (null === e || void 0 === e || null === (l = e.payment) || void 0 === l || null === (o = l.paymentGroup[
0
]) || void 0 === o ? void 0 : o.issuers).map(e => { a.push(e.issuerProvider)
})
} else if ("nonaggregator" === t) { var n, i; (null === e || void 0 === e || null === (n = e.payment) || void 0 === n || null === (i = n.paymentInformation) || void 0 === i ? void 0 : i.provider).split(",").map(e => { a.push(e)
})
} return a
}, da = function () { let e = arguments.length > 0 && void 0 !== arguments[
0
] ? arguments[
0
] : "", t = arguments.length > 1 && void 0 !== arguments[
1
] ? arguments[
1
] : "", a = arguments.length > 2 && void 0 !== arguments[
2
] ? arguments[
2
] : "", l = !(arguments.length > 3 && void 0 !== arguments[
3
]) || arguments[
3
], o = arguments.length > 5 && void 0 !== arguments[
5
] && arguments[
5
]; const n = localStorage.getItem("customer_hash"), i = localStorage.getItem("csc_code"); if ("undefined" !== typeof document && document.getElementById("panel2") && l && !o && (document.getElementById("panel2").style.display = "block", ga()), n && "" !== n || i && "" !== i) { var r, d; const o = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); if (o && "" !== o && ((null === o || void 0 === o || null === (r = o.wishListInfo) || void 0 === r || null === (d = r.cartWsDto) || void 0 === d ? void 0 : d.code) || T)) { var s, c, u, v, m, p, g, f, y, E, h, S, I, O, b, _, D, C, P, k; "" === e && "" !== a && (e = a); const n = localStorage.getItem("access_token"), r = document.head.querySelector("[name=tdl-sso-client_id][content]"); r ? r.content : w.a.CLIENT_ID; let d = ""; var A; if (Ut) d = i; else d = null === o || void 0 === o || null === (A = o.customerInfo) || void 0 === A ? void 0 : A.customerHash; const T = Yt(d, o), Ot = (null === (s = e) || void 0 === s ? void 0 : s.promotionId) ? e.promotionId : "", bt = (null === (c = e) || void 0 === c ? void 0 : c.promotionExpiryDate) ? e.promotionExpiryDate : ""; let _t = "", Dt = "", Ct = "", Pt = "", Tt = ""; const kt = (null === (u = e) || void 0 === u ? void 0 : u.promotionTitle) ? e.promotionTitle : "", wt = (null === (v = e) || void 0 === v ? void 0 : v.promotionDescription) ? e.promotionDescription : "", At = { pincode: JSON.parse(localStorage.getItem("3hrPincode")), returnUrl: "".concat(window.location.origin,
"/order-confirmation"), newCoinsApplied: It || 0
}; if (w.a.TD_JARVIS_FLAG) { const e = localStorage.getItem("tneu.deviceInfo"); At.platformAndVersion = e ? JSON.parse(e) : {}
} if ((null === (m = e) || void 0 === m ? void 0 : m.payment) && ((null === (p = e) || void 0 === p || null === (g = p.payment) || void 0 === g ? void 0 : g.paymentInformation) && localStorage.appliedOfferPromoId || (null === (f = e) || void 0 === f || null === (y = f.payment) || void 0 === y ? void 0 : y.hasOwnProperty("paymentGroup")) && (null === (E = e) || void 0 === E || null === (h = E.payment) || void 0 === h || null === (S = h.paymentGroup[
0
]) || void 0 === S ? void 0 : S.hasOwnProperty("issuers")) && (null === (I = e) || void 0 === I || null === (O = I.payment) || void 0 === O || null === (b = O.paymentGroup[
0
]) || void 0 === b || null === (_ = b.issuers[
0
]) || void 0 === _ ? void 0 : _.issuerProvider) && (null === (D = e) || void 0 === D || null === (C = D.payment) || void 0 === C || null === (P = C.paymentGroup[
0
]) || void 0 === P || null === (k = P.issuers[
0
]) || void 0 === k ? void 0 : k.issuerPaymentMode) && localStorage.appliedOfferPromoId)) { var R, L, F, x, M, B, G, V, U, H, J, Y, q, K, z, Z, Q, X, $, ee, ae, le, oe, re, de, se, ce, ve, pe, fe, ye, Ee, he, Se, Ie, Ne; try { var Oe, be, _e, De, Ce, Pe; _t = (null === (Oe = e) || void 0 === Oe || null === (be = Oe.payment) || void 0 === be || null === (_e = be.paymentInformation) || void 0 === _e ? void 0 : _e.provider) ? ra(e,
"nonaggregator") : (null === (De = e) || void 0 === De || null === (Ce = De.payment) || void 0 === Ce || null === (Pe = Ce.paymentGroup[
0
]) || void 0 === Pe ? void 0 : Pe.issuers.length) > 0 ? ra(e,
"aggregator") : ""
} catch (Nt) { _t = ""
} try { var Te, ke, we, Ae, Re, Le, Fe, je, Me, Be, Ge, Ve, Ue, He; Dt = (null === (Te = e) || void 0 === Te || null === (ke = Te.payment) || void 0 === ke || null === (we = ke.paymentInformation) || void 0 === we ? void 0 : we.paymentSubType) ? null === (Ae = e) || void 0 === Ae || null === (Re = Ae.payment) || void 0 === Re || null === (Le = Re.paymentInformation) || void 0 === Le ? void 0 : Le.paymentSubType : (null === (Fe = e) || void 0 === Fe || null === (je = Fe.payment) || void 0 === je || null === (Me = je.paymentGroup[
0
]) || void 0 === Me || null === (Be = Me.issuers[
0
]) || void 0 === Be ? void 0 : Be.issuerPaymentSubType) ? null === (Ge = e) || void 0 === Ge || null === (Ve = Ge.payment) || void 0 === Ve || null === (Ue = Ve.paymentGroup[
0
]) || void 0 === Ue || null === (He = Ue.issuers[
0
]) || void 0 === He ? void 0 : He.issuerPaymentSubType : ""
} catch (Nt) { Dt = ""
} Ct = (null === (R = e) || void 0 === R || null === (L = R.payment) || void 0 === L || null === (F = L.paymentInformation) || void 0 === F ? void 0 : F.paymentType) ? null === (x = e) || void 0 === x || null === (M = x.payment) || void 0 === M || null === (B = M.paymentInformation) || void 0 === B ? void 0 : B.paymentType : "", Pt = (null === (G = e) || void 0 === G || null === (V = G.payment) || void 0 === V || null === (U = V.paymentInformation) || void 0 === U ? void 0 : U.paymentMode) ? null === (H = e) || void 0 === H || null === (J = H.payment) || void 0 === J || null === (Y = J.paymentInformation) || void 0 === Y ? void 0 : Y.paymentMode : (null === (q = e) || void 0 === q || null === (K = q.payment) || void 0 === K || null === (z = K.paymentGroup[
0
]) || void 0 === z || null === (Z = z.issuers[
0
]) || void 0 === Z ? void 0 : Z.issuerPaymentMode) ? null === (Q = e) || void 0 === Q || null === (X = Q.payment) || void 0 === X || null === ($ = X.paymentGroup[
0
]) || void 0 === $ || null === (ee = $.issuers[
0
]) || void 0 === ee ? void 0 : ee.issuerPaymentMode : "", (null === (ae = e) || void 0 === ae ? void 0 : ae.benefit) && (null === (le = e) || void 0 === le || null === (oe = le.benefit) || void 0 === oe ? void 0 : oe.benefitType) && (Tt = e.benefit.benefitType); const t = { amount: "", offer_applied: "", benefitType: "", expiryDate: bt, offer_code: Ot, payment_card_issuer: '[
""
]', payment_card_type: "", payment_method: "", payment_method_type: "", offerTitle: kt, offerDescription: wt
}; var Je, We, Ye, qe, Ke, ze, Qe, $e, et, tt, lt, ot, nt, it, rt, dt, st, ct, ut, vt; if ((null === (re = e) || void 0 === re || null === (de = re.payment) || void 0 === de ? void 0 : de.hasOwnProperty("paymentGroup")) && (null === (se = e) || void 0 === se || null === (ce = se.payment) || void 0 === ce || null === (ve = ce.paymentGroup[
0
]) || void 0 === ve ? void 0 : ve.hasOwnProperty("aggregators"))) t.aggregatorId = null === (Je = e) || void 0 === Je || null === (We = Je.payment) || void 0 === We || null === (Ye = We.paymentGroup[
0
]) || void 0 === Ye || null === (qe = Ye.aggregators[
0
]) || void 0 === qe ? void 0 : qe.aggregatorId, t.aggregatorName = null === (Ke = e) || void 0 === Ke || null === (ze = Ke.payment) || void 0 === ze || null === (Qe = ze.paymentGroup[
0
]) || void 0 === Qe || null === ($e = Qe.aggregators[
0
]) || void 0 === $e ? void 0 : $e.aggregatorName, t.gateway_id = null === (et = e) || void 0 === et || null === (tt = et.payment) || void 0 === tt || null === (lt = tt.paymentGroup[
0
]) || void 0 === lt || null === (ot = lt.aggregators[
0
]) || void 0 === ot ? void 0 : ot.aggregatorId; if ("" !== _t) { const e = _t; t.payment_card_issuer = JSON.stringify(e)
} if ("" !== Dt) { const e = [Dt
]; t.payment_card_type = JSON.stringify(e)
} else { const e = [
""
]; t.payment_card_type = JSON.stringify(e)
} if ("" !== Ct) { const e = [
[Ct
]
]; t.payment_method = JSON.stringify(e)
} else { const e = [
[
    ""
]
]; t.payment_method = JSON.stringify(e)
} if ("" !== Pt) { const e = [Pt
]; t.payment_method_type = JSON.stringify(e)
} else { const e = []; t.payment_method_type = JSON.stringify(e)
} if ("" !== Tt && (t.benefitType = Tt), (null === (pe = e) || void 0 === pe ? void 0 : pe.payment) && ((null === (fe = e) || void 0 === fe || null === (ye = fe.payment) || void 0 === ye ? void 0 : ye.paymentInformation) && (null === (Ee = e) || void 0 === Ee || null === (he = Ee.payment) || void 0 === he || null === (Se = he.paymentInformation) || void 0 === Se ? void 0 : Se.emiType) || (null === (Ie = e) || void 0 === Ie || null === (Ne = Ie.payment) || void 0 === Ne ? void 0 : Ne.emiType))) t.emiType = (null === (nt = e) || void 0 === nt || null === (it = nt.payment) || void 0 === it || null === (rt = it.paymentInformation) || void 0 === rt ? void 0 : rt.emiType) ? null === (dt = e) || void 0 === dt || null === (st = dt.payment) || void 0 === st || null === (ct = st.paymentInformation) || void 0 === ct ? void 0 : ct.emiType : null === (ut = e) || void 0 === ut || null === (vt = ut.payment) || void 0 === vt ? void 0 : vt.emiType; if (w.a.SHOW_BIN_VELOCITY) { var mt, pt, gt, ft, yt, Et, ht, St; if (null === (mt = e) || void 0 === mt ? void 0 : mt.hasOwnProperty("supplementaryDetails")) t.supplementaryDetails = null === (yt = e) || void 0 === yt ? void 0 : yt.supplementaryDetails; if (null === (pt = e) || void 0 === pt ? void 0 : pt.hasOwnProperty("offerGenre")) t.offerGenre = null === (Et = e) || void 0 === Et ? void 0 : Et.offerGenre; if (null === (gt = e) || void 0 === gt ? void 0 : gt.hasOwnProperty("customField1")) t.customField1 = null === (ht = e) || void 0 === ht ? void 0 : ht.customField1; if (null === (ft = e) || void 0 === ft ? void 0 : ft.hasOwnProperty("customField2")) t.customField2 = null === (St = e) || void 0 === St ? void 0 : St.customField2
} console.log("paymentDetails beforepar", t); const a = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV), l = ue.a.encrypt(JSON.stringify(t), a,
{ mode: ge.a
}).toString(); At.offerDetails = l
} if (ie && ie.length > 0) { const e = { gvDetails: ie, gvType: te
}, t = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV), a = ue.a.encrypt(JSON.stringify(e), t,
{ mode: ge.a
}).toString(); At.gvDetails = { gvRequest: a
}
} try { if (At.isSWT = "undefined" !== typeof window && ("tcp" === localStorage.getItem("isTCPBody") || "true" === sessionStorage.getItem("isRedirectedFromTCP")), At.isDesktopSWT = "undefined" !== typeof window && "tcp-pwa" === localStorage.getItem("userSource"), localStorage.getItem("customer_details")) { const e = JSON.parse(localStorage.getItem("customer_details")); At.isLoyal = !!(null === e || void 0 === e ? void 0 : e.loyalCustomer) && "Y" === e.loyalCustomer
}
} catch (Nt) { At.isSWT = !1, At.isLoyal = !1
} W(T, At).then(e => { var a, o, n, i, r, d, s, c, u; (Xe(!1),
"success" === e.status) ? ((null === e || void 0 === e || null === (a = e.data) || void 0 === a ? void 0 : a.payload) || j.push("/checkout"),
"PAYNOW" === t && (document.getElementById("panel2") && document.getElementById("panel2").classList.add("Mui-expanded"), document.getElementById("juspay_div") && (document.getElementById("juspay_div").style.display = "block"), document.getElementById("gv_gc_div") && (document.getElementById("gv_gc_div").style.display = "block")), ia(null === e || void 0 === e ? void 0 : e.data), (null === localStorage.getItem("gv_details") && null === localStorage.getItem("gv_type") || void 0 === localStorage.getItem("gv_details") && void 0 === localStorage.getItem("gv_type")) && xe(!0), Ze(null === e || void 0 === e || null === (o = e.data) || void 0 === o || null === (n = o.payload) || void 0 === n ? void 0 : n.isCartPODEligible), at(null === e || void 0 === e || null === (i = e.data) || void 0 === i || null === (r = i.payload) || void 0 === r ? void 0 : r.orderId), sessionStorage.orderIDses = null === e || void 0 === e || null === (d = e.data) || void 0 === d || null === (s = d.payload) || void 0 === s ? void 0 : s.orderId, l && ne("panel2"), Qt(e.data)) : !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout && e.data.errors && "pan card not found" === (null === (c = e.data.errors[
0
]) || void 0 === c ? void 0 : c.message)) ? window.location.replace("checkout") : e.data.errors && (null === (u = e.data.errors[
0
]) || void 0 === u ? void 0 : u.message) && j.push("/checkout") : Object(N.k)("ERROR", e.statusCode,
"",
"",
{ service_name: "fetchPaymentDetailsService"
})
})
}
} else !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push("/cart") : Object(N.k)("ERROR",
"",
"/cart",
"",
{ service_name: "fetchPaymentDetailsService"
})
}, sa = e => (t, a) => {
0 !== _t && ne(!!a && e)
}, ca = (e, t) => { var a; if (re(null === e || void 0 === e ? void 0 : e.gvDetails), localStorage.setItem("gv_details", JSON.stringify(e)), localStorage.setItem("gv_type", te),
"" !== (null === e || void 0 === e || null === (a = e.gvDetails[
0
]) || void 0 === a ? void 0 : a.respMsg)) { var l; try { var o, n; Be({ message: null === e || void 0 === e || null === (o = e.gvDetails[
0
]) || void 0 === o ? void 0 : o.respMsg, type: !0 === (null === e || void 0 === e || null === (n = e.gvDetails[
0
]) || void 0 === n ? void 0 : n.isValid) ? "success": "failure"
})
} catch (i) {} (null === e || void 0 === e || null === (l = e.gvDetails[
0
]) || void 0 === l ? void 0 : l.isValid) ? "Vouchagram" === t.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Success"), be("Voucher",
"Success")) : "GiftCard" === t.gvType && Ae("Apply:Gift Card",
"apply",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Success") : "Vouchagram" === (null === t || void 0 === t ? void 0 : t.gvType) ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Failure:".concat(null === e || void 0 === e ? void 0 : e.gvDetails[
0
].respMsg)), be("Voucher",
"Failure")) : "GiftCard" === t.gvType && Ae("Apply:Gift Card",
"apply",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Failure:".concat(null === e || void 0 === e ? void 0 : e.gvDetails[
0
].respMsg))
} else (null === e || void 0 === e ? void 0 : e.gvDetails[
0
].isValid) ? "Vouchagram" === t.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Success"), be("Voucher",
"Success")) : "GiftCard" === t.gvType && Ae("Apply:Gift Card",
"apply",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Success") : "Vouchagram" === t.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Failure:Card not applied"), be("Voucher",
"Failure")) : "GiftCard" === t.gvType && Ae("Apply:Gift Card",
"apply",
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardBal,
null === e || void 0 === e ? void 0 : e.gvDetails[
0
].cardNo,
"Failure:Card not applied"); localStorage.removeItem("gv_Activacted_details")
}, ua = (e, t) => { if ("GiftCard" === e.gvType && "removeCard" !== t) return void ea(e.gvDetails); const a = localStorage.getItem("customer_hash"), l = localStorage.getItem("csc_code"); if (a && "" !== a || l && "" !== l) { var o, n; const t = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); if (t && "" !== t && ((null === t || void 0 === t || null === (o = t.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code) || T)) { const o = localStorage.getItem("access_token"), n = document.head.querySelector("[name=tdl-sso-client_id][content]"), r = { client_id: n ? n.content : w.a.CLIENT_ID, accessToken: o, customerHash: a,
"Content-Type": "application/json"
}; let d = ""; var i; if (Ut) d = l; else d = null === t || void 0 === t || null === (i = t.customerInfo) || void 0 === i ? void 0 : i.customerHash; const s = ((e, t) => { let a = ""; var l, o, n; T ? a = "".concat(e,
"/checkout/applyVoucher/").concat(null === P || void 0 === P || null === (l = P.state) || void 0 === l ? void 0 : l.orderId) : a = "".concat(e,
"/checkout/applyVoucher/").concat(null === t || void 0 === t || null === (o = t.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code); return a
})(d, t), c = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV); (async function (e, t, a) { let l = arguments.length > 3 && void 0 !== arguments[
3
] && arguments[
3
]; try { let o = ""; o = !1 === l ? H.pb : H.Vb; const n = o + e, i = await U.HttpService.post(n, JSON.stringify(t),
{ headers: a
}); return i.status >= 200 && i.status < 300 && "[object Object]" === Object.prototype.toString.call(i.data) && null !== i.data ? { status: "success", data: i.data
} : { status: "error", data: []
}
} catch (o) { return { data: []
}
}
})(s,
{ gvRequest: ue.a.encrypt(JSON.stringify(e), c,
{ mode: ge.a
}).toString()
}, r, T).then(t => { if ("success" === t.status) { var a, l, o, n, i, r; const y = null === t || void 0 === t || null === (a = t.data) || void 0 === a ? void 0 : a.gvRequest.replace(/-/g,
"+").replace(/_/g,
"/"), E = ue.a.decrypt(y, c,
{ mode: ge.a
}), h = JSON.parse(E.toString(me.a)); var d, s, u, v; if (Be({ message: "", type: "success"
}), Ue(""),
null === t || void 0 === t || null === (l = t.data) || void 0 === l ? void 0 : l.customErrorMsg) Be({ message: null === t || void 0 === t || null === (d = t.data) || void 0 === d ? void 0 : d.customErrorMsg, type: "failure"
}); if ((null === t || void 0 === t || null === (o = t.data) || void 0 === o ? void 0 : o.cardSpecificErrorMsg) && Ue(t.data.cardSpecificErrorMsg),
"Vouchagram" === (null === e || void 0 === e ? void 0 : e.gvType) && localStorage.setItem("gv_Activacted_details", JSON.stringify(h)), (null === h || void 0 === h ? void 0 : h.gvDetails) && (null === h || void 0 === h || null === (n = h.gvDetails) || void 0 === n ? void 0 : n.length) > 0 && (null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardBal) > 0) if ("Vouchagram" === (null === e || void 0 === e ? void 0 : e.gvType)) if (de > 0) (null === h || void 0 === h || null === (s = h.gvDetails[
0
]) || void 0 === s ? void 0 : s.cardBal) > de ? Lt(!0) : ca(h, e); else (null === h || void 0 === h || null === (u = h.gvDetails[
0
]) || void 0 === u ? void 0 : u.cardBal) > (null === K || void 0 === K || null === (v = K.totalPrice) || void 0 === v ? void 0 : v.value) ? Lt(!0) : ca(h, e); else Lt(!1), ca(h, e); else if (h.gvDetails && h.gvDetails.length > 0 && 0 === (null === (i = h.gvDetails[
0
]) || void 0 === i ? void 0 : i.cardBal) && !(null === (r = h.gvDetails[
0
]) || void 0 === r ? void 0 : r.respMsg)) Be({ message: m.a.NO_BAL_MSG, type: "failure"
}),
"Vouchagram" === e.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardBal,
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardNo,
"Failure:This Gift Card/Voucher has no balance"), be("Voucher",
"Failure"), localStorage.removeItem("gv_Activacted_details")) : "GiftCard" === e.gvType && Ae("Apply:Gift Card",
"apply",
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardBal,
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardNo,
"Failure:This Gift Card/Voucher has no balance"); else if ((null === h || void 0 === h ? void 0 : h.gvDetails.length) > 0 && "" !== (null === h || void 0 === h ? void 0 : h.gvDetails[
0
].respMsg)) { try { var p, g; Be({ message: null === h || void 0 === h || null === (p = h.gvDetails[
            0
        ]) || void 0 === p ? void 0 : p.respMsg, type: !0 === (null === h || void 0 === h || null === (g = h.gvDetails[
            0
        ]) || void 0 === g ? void 0 : g.isValid) ? "success": "failure"
    })
} catch (f) {} "Vouchagram" === e.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === h || void 0 === h ? void 0 : h.gvDetails[
    0
].cardBal,
null === h || void 0 === h ? void 0 : h.gvDetails[
    0
].cardNo,
"Failure:".concat(null === h || void 0 === h ? void 0 : h.gvDetails[
    0
].respMsg)), be("Voucher",
"Failure"), localStorage.removeItem("gv_Activacted_details")) : "GiftCard" === e.gvType && Ae("Apply:Gift Card",
"apply",
null === h || void 0 === h ? void 0 : h.gvDetails[
    0
].cardBal,
null === h || void 0 === h ? void 0 : h.gvDetails[
    0
].cardNo,
"Failure:".concat(null === h || void 0 === h ? void 0 : h.gvDetails[
    0
].respMsg))
} else (null === h || void 0 === h ? void 0 : h.gvDetails.length) > 5 ? "Vouchagram" === e.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardBal,
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardNo,
"Failure:You can apply maximum 5 cards"), be("Voucher",
"Failure"), localStorage.removeItem("gv_Activacted_details")) : "GiftCard" === e.gvType && Ae("Apply:Gift Card",
"apply",
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardBal,
null === h || void 0 === h ? void 0 : h.gvDetails[
0
].cardNo,
"Failure:You can apply maximum 5 cards") : 0 === (null === h || void 0 === h ? void 0 : h.gvDetails.length) && (re(h.gvDetails),
"Vouchagram" === e.gvType ? (Ae("Apply:Voucher",
"apply",
"",
"",
"",
"",
"",
"Failure:Card not found"), be("Voucher",
"Failure"), localStorage.removeItem("gv_Activacted_details")) : "GiftCard" === e.gvType && Ae("Apply:Gift Card",
"apply",
"",
"",
"Failure:Card not found")); se(h.balAmountPayable)
}
})
}
}
}, va = (e, t) => { const a = localStorage.getItem("customer_hash"), l = localStorage.getItem("csc_code"); if (a && "" !== a || l && "" !== l) { var o, n; const a = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); if (a && "" !== a && ((null === a || void 0 === a || null === (o = a.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code) || T)) { let o = ""; var i; if (Ut) o = l; else o = null === a || void 0 === a || null === (i = a.customerInfo) || void 0 === i ? void 0 : i.customerHash; Y(qt(o, a.wishListInfo.cartWsDto.code), T).then(a => { if (a.status >= 200 && a.status < 300) !0 === a.data ? ua(e, t) : !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart", cartPageRedirect: "redirect-to-cart"
}) : Object(N.k)("ERROR", a.status,
"/cart",
"redirect-to-cart",
{ service_name: "fetchPaymentValidationService"
}); else if (401 === a.status) { const e = "function" === typeof window.cromaSso ? new window.cromaSso({ env: "sit"
}) : null; null !== e ? e.logIn("others") : "true" === localStorage.getItem("isCSC") ? Object(Fe.a)() : sessionStorage.calledFromTDNative ? Object(N.k)("ERROR", a.status,
"/",
"",
{ service_name: "fetchPaymentValidationService"
}) : j.push("/")
} else !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart", cartPageRedirect: "error"
}) : Object(N.k)("ERROR", a.status,
"/cart",
"error",
{ service_name: "fetchPaymentValidationService"
})
}).catch(e => { !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart", cartPageRedirect: "error"
}) : Object(N.k)("ERROR",
"network_failure",
"/cart",
"error",
{ service_name: "fetchPaymentValidationService"
})
})
}
}
}, ma = () => { var e; return (null === K || void 0 === K || null === (e = K.entries) || void 0 === e ? void 0 : e.length) && (null === K || void 0 === K ? void 0 : K.entries.some(e => { var t; return !0 === (null === e || void 0 === e || null === (t = e.product) || void 0 === t ? void 0 : t.isGiftCard)
}))
}, pa = e => { const t = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV); return ue.a.encrypt(e, t,
{ mode: ge.a
}).toString()
}, ga = () => { jt(""), Mt("")
}, fa = e => { const t = "undefined" !== typeof window && ("tcp" === localStorage.getItem("isTCPBody") || "true" === sessionStorage.getItem("isRedirectedFromTCP")), a = "undefined" !== typeof window && "tcp-pwa" === localStorage.getItem("userSource"); return t || a ? "TC" + e : e
}, ya = () => { it(!0); const e = []; for (let p = 0; p < ie.length; p++)e.push({ cardBal: ie[p
].cardBal, cardNo: ie[p
].cardNo, cardPin: ie[p
].cardPin, cardType: ie[p
].cardType
}); const t = { gvDetails: e, gvType: te
}, a = localStorage.getItem("customer_hash"), l = localStorage.getItem("csc_code"); if (a && "" !== a || l && "" !== l) { var o, n; const e = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); if (e && "" !== e && ((null === e || void 0 === e || null === (o = e.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code) || T)) { var i, r, d, s, c, u, v, m; const o = localStorage.getItem("access_token"), n = document.head.querySelector("[name=tdl-sso-client_id][content]"), p = { client_id: n ? n.content : w.a.CLIENT_ID, accessToken: o, customerHash: a,
"Content-Type": "application/json"
}; let g = ""; g = Ut ? l : a; const f = T ? "userId=".concat(g,
"&orderId=").concat(null === P || void 0 === P || null === (i = P.state) || void 0 === i ? void 0 : i.orderId,
"&isPartialFlag=").concat((null === Tt || void 0 === Tt || null === (r = Tt.newCoinsApplied) || void 0 === r ? void 0 : r.value) > 0 && (null === Tt || void 0 === Tt ? void 0 : Tt.hasOwnProperty("gvResponseDetailsWsDto"))) : "userId=".concat(g,
"&orderId=").concat(null === e || void 0 === e || null === (d = e.wishListInfo) || void 0 === d || null === (s = d.cartWsDto) || void 0 === s ? void 0 : s.code,
"&isPartialFlag=").concat((null === Tt || void 0 === Tt || null === (c = Tt.newCoinsApplied) || void 0 === c ? void 0 : c.value) > 0 && (null === Tt || void 0 === Tt ? void 0 : Tt.hasOwnProperty("gvResponseDetailsWsDto"))), y = me.a.parse(w.a.AES_ENCRYPTION_SECRET_KEY_GV), E = { gvRequest: ue.a.encrypt(JSON.stringify(t), y,
{ mode: ge.a
}).toString(), loyaltyPoints: ue.a.encrypt("".concat(It || 0), y,
{ mode: ge.a
}).toString()
}, h = T ? "".concat(null === P || void 0 === P || null === (u = P.state) || void 0 === u ? void 0 : u.orderId,
"&userId=").concat(g) : "".concat(null === e || void 0 === e || null === (v = e.wishListInfo) || void 0 === v || null === (m = v.cartWsDto) || void 0 === m ? void 0 : m.code,
"&userId=").concat(g); Object(qe.a)(); q(h,
{ clickId: Object(qe.d)(), offerId: Object(qe.e)(), affiliateId: Object(qe.c)(),
"Content-Type": "application/json"
}).then(t => { _a(),
200 === t.status ? async function (e, t, a) { try { const l = H.qb + e, o = await U.HttpService.post(l, JSON.stringify(t),
{ headers: a
}); return o.status >= 200 && o.status < 300 ? { status: "success"
} : { status: "error", data: []
}
} catch (l) { return { status: "error", data: []
}
}
}(f, E, p).then(t => { if ("success" === t.status) { var a, l; oa(), localStorage.removeItem("gv_details"), localStorage.removeItem("gv_type"); const t = T ? null === P || void 0 === P || null === (a = P.state) || void 0 === a ? void 0 : a.orderId : null === (l = e.wishListInfo.cartWsDto) || void 0 === l ? void 0 : l.code; j.push("/order-confirmation?status_id=GV&status=CHARGED&order_id=".concat(fa(t)))
} else 0 === t.data.length && (sessionStorage.calledFromTDNative && Object(N.k)("ERROR", t.status,
"",
"",
{ service_name: "placeOrderByGcService"
}), it(!1))
}).catch(e => { it(!1)
}) : !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart"
}) : Object(N.k)("ERROR", t.status,
"/cart",
"",
{ service_name: "placeOrderByGcService"
})
}).catch(e => { !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart"
}) : Object(N.k)("ERROR",
"network_failure",
"/cart",
"",
{ service_name: "placeOrderByGcService"
})
})
}
}
}; Object(l.useEffect)(() => {
"" !== ce && Ht.push({
"Card No": ce
}),
"" !== pe && Ht.push({
"Card Pin": pe
})
}), Object(l.useEffect)(() => { if ("" !== ce || "" !== pe) { const e = Object.assign({}, ...Ht); Object(je.a)(Object.keys(e), Object.values(e))
}
}); const Ea = (e, t) => { var a, l; const o = Sa(); if (!Ct || (null === ie || void 0 === ie ? void 0 : ie.length) > 0 && (null === Tt || void 0 === Tt || null === (a = Tt.totalPrice) || void 0 === a ? void 0 : a.value) <= o && (null === Tt || void 0 === Tt || null === (l = Tt.newCoinsApplied) || void 0 === l ? void 0 : l.value) > 0) { var n, i, r, d, s; At("none"), (null === e || void 0 === e || null === (n = e.target) || void 0 === n ? void 0 : n.checked) || ba(), Dt(-1), J((null === e || void 0 === e || null === (i = e.target) || void 0 === i ? void 0 : i.checked) ? t : 0); let a = 0; if (null !== localStorage.getItem("gv_details") && void 0 !== localStorage.getItem("gv_details") && void 0 !== localStorage.getItem("gv_type") && null !== localStorage.getItem("gv_type")) { le(localStorage.getItem("gv_type")); const l = JSON.parse(localStorage.getItem("gv_details")); var c, u; if (w.a.NEUCOINS_DECIMAL_FLAG) a = (null === e || void 0 === e || null === (c = e.target) || void 0 === c ? void 0 : c.checked) ? (null === l || void 0 === l ? void 0 : l.balAmountPayable) > t ? t : null === l || void 0 === l ? void 0 : l.balAmountPayable : 0; else a = (null === e || void 0 === e || null === (u = e.target) || void 0 === u ? void 0 : u.checked) ? (null === l || void 0 === l ? void 0 : l.balAmountPayable) > t ? t : Number.isInteger(null === l || void 0 === l ? void 0 : l.balAmountPayable) ? null === l || void 0 === l ? void 0 : l.balAmountPayable : Math.floor(null === l || void 0 === l ? void 0 : l.balAmountPayable) - 1 : 0
} else { var v, m, p, g, f, y, E; if (w.a.NEUCOINS_DECIMAL_FLAG) a = (null === e || void 0 === e || null === (v = e.target) || void 0 === v ? void 0 : v.checked) ? t > (null === K || void 0 === K || null === (m = K.totalPrice) || void 0 === m ? void 0 : m.value) ? null === K || void 0 === K || null === (p = K.totalPrice) || void 0 === p ? void 0 : p.value : t : 0; else a = e.target.checked ? t > (null === K || void 0 === K || null === (g = K.totalPrice) || void 0 === g ? void 0 : g.value) ? Number.isInteger(null === K || void 0 === K || null === (f = K.totalPrice) || void 0 === f ? void 0 : f.value) ? null === K || void 0 === K || null === (y = K.totalPrice) || void 0 === y ? void 0 : y.value : Math.floor(null === K || void 0 === K || null === (E = K.totalPrice) || void 0 === E ? void 0 : E.value) - 1 : t : 0
} St(a), Nt(a), De(null === e || void 0 === e || null === (r = e.target) || void 0 === r ? void 0 : r.checked, Math.floor(null === B || void 0 === B || null === (d = B.groupLoyaltyProgramDetails[
0
]) || void 0 === d ? void 0 : d.loyaltyPoints), tt,
null === b || void 0 === b || null === (s = b.cartData) || void 0 === s ? void 0 : s.entries, a)
} else { var h, S, I, N, O; (null === e || void 0 === e || null === (h = e.target) || void 0 === h ? void 0 : h.checked) && (e.target.checked = !1), At("block"), De(null === e || void 0 === e || null === (S = e.target) || void 0 === S ? void 0 : S.checked, Math.floor(null === B || void 0 === B || null === (I = B.groupLoyaltyProgramDetails[
0
]) || void 0 === I ? void 0 : I.loyaltyPoints), tt,
null === b || void 0 === b || null === (N = b.cartData) || void 0 === N ? void 0 : N.entries,
null === B || void 0 === B || null === (O = B.groupLoyaltyProgramDetails[
0
]) || void 0 === O ? void 0 : O.loyaltyPoints)
}
}, ha = (e, t) => { var a; (e && e.preventDefault(), ee(""),
null != t && Number(It) !== Number(t)) && ((null === e || void 0 === e || null === (a = e.target) || void 0 === a ? void 0 : a.checked) || ba(), Dt(-1), Nt(t),
"" !== t && dt(!1)); bt("")
}, Sa = () => { let e = 0; return (null === ie || void 0 === ie ? void 0 : ie.length) > 0 && (e = ie.reduce((e, t) => e + t.cardBal,
0), e = e % 1 === 0 ? e : e.toFixed(2), e = Number(e)), e
},
[Ia
] = Object(Ye.a)(), Na = Ia <= 767 ? "-mob": "", Oa = () => { var e, t, a, l, o; it(!0), ne(""); const n = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); let i = {}, r = ""; if (n && "" !== n) { var d, s, c, u, v; const e = localStorage.getItem("access_token"), t = null === n || void 0 === n || null === (d = n.customerInfo) || void 0 === d ? void 0 : d.customerHash, a = document.head.querySelector("[name=tdl-sso-client_id][content]"), l = a ? a.content : w.a.CLIENT_ID; i = { client_id: l, accessToken: e, customerHash: t, isPaymentPage: "true"
}, r = "/ocs/v1/place-order/loaltypoint?appliedloaltyPoints=".concat(It,
"&orderId=").concat(T ? null === P || void 0 === P || null === (s = P.state) || void 0 === s ? void 0 : s.orderId : null === n || void 0 === n || null === (c = n.wishListInfo) || void 0 === c || null === (u = c.cartWsDto) || void 0 === u ? void 0 : u.code,
"&userId=").concat(null === n || void 0 === n || null === (v = n.customerInfo) || void 0 === v ? void 0 : v.customerHash)
} const m = T ? "".concat(null === P || void 0 === P || null === (e = P.state) || void 0 === e ? void 0 : e.orderId,
"&userId=").concat(null === n || void 0 === n || null === (t = n.customerInfo) || void 0 === t ? void 0 : t.customerHash) : "".concat(null === n || void 0 === n || null === (a = n.wishListInfo) || void 0 === a || null === (l = a.cartWsDto) || void 0 === l ? void 0 : l.code,
"&userId=").concat(null === n || void 0 === n || null === (o = n.customerInfo) || void 0 === o ? void 0 : o.customerHash); Object(qe.a)(); q(m,
{ clickId: Object(qe.d)(), offerId: Object(qe.e)(), affiliateId: Object(qe.c)(),
"Content-Type": "application/json"
}).then(e => { _a(),
200 === e.status ? async function (e, t) { try { const a = await U.HttpService.get(e,
{ headers: t
}); return a.status >= 200 && a.status < 300 && "[object Object]" === Object.prototype.toString.call(a.data) && null !== a.data ? { status: "success", data: a.data
} : { status: "error", data: []
}
} catch (a) { return { status: "error", data: []
}
}
}(r, i).then(e => { if ("success" === e.status) { var t, a; oa(); const e = T ? null === P || void 0 === P || null === (t = P.state) || void 0 === t ? void 0 : t.orderId : null === (a = n.wishListInfo.cartWsDto) || void 0 === a ? void 0 : a.code; j.push("/order-confirmation?status_id=GV&status=CHARGED&order_id=".concat(fa(e)))
} else 0 === e.data.length && (sessionStorage.calledFromTDNative && Object(N.k)("ERROR", e.status,
"",
"",
{ service_name: "neuCoinsOnlyRedeemService"
}), it(!1))
}).catch(e => { it(!1)
}) : !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart"
}) : Object(N.k)("ERROR", e.status,
"/cart",
"",
{ service_name: "neuCoinsOnlyRedeemService"
})
}).catch(e => { !sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : j.push({ pathname: "/cart"
}) : Object(N.k)("ERROR",
"network_failure",
"/cart",
"",
{ service_name: "neuCoinsOnlyRedeemService"
})
})
}, ba = () => { ne("panel2"), document.getElementById("gv_gc_div") && (document.getElementById("gv_gc_div").style.display = "block"), (() => { var e; return !!Tt && ((null === Tt || void 0 === Tt || null === (e = Tt.newCoinsApplied) || void 0 === e ? void 0 : e.value) > 0 || (null === Tt || void 0 === Tt ? void 0 : Tt.hasOwnProperty("gvResponseDetailsWsDto")))
})() || da("",
"", $e, !0, Number(It), !1)
}, _a = () => { localStorage.removeItem("appliedOfferPromoId"), localStorage.removeItem("appliedOfferLogo"), localStorage.removeItem("cartOffersCount"), localStorage.removeItem("cartOffersCollection")
}, Da = () => { At("none"); const e = JSON.parse(localStorage.getItem("gv_Activacted_details")); (null === e || void 0 === e ? void 0 : e.gvDetails) && e.gvDetails.splice(0,
1); const t = { gvDetails: null === e || void 0 === e ? void 0 : e.gvDetails, gvType: te
}; var a; if (ie && (null === ie || void 0 === ie ? void 0 : ie.length) > 0) { if (document.getElementById("cardNo")) document.getElementById("cardNo").value = null === (a = ie[
0
]) || void 0 === a ? void 0 : a.cardNo; else if (document.getElementById("cardPin")) { var l; document.getElementById("cardPin").value = null === (l = ie[
0
]) || void 0 === l ? void 0 : l.cardPin
}
} else document.getElementById("cardNo") ? document.getElementById("cardNo").value = "": document.getElementById("cardPin") && (document.getElementById("cardPin").value = ""), le("Select"), localStorage.removeItem("gv_type"), localStorage.removeItem("gv_details"); Lt(!1), va(t), Be({ message: "", type: "success"
}), Ue(""), localStorage.removeItem("gv_Activacted_details")
}; return o.a.createElement(o.a.Fragment,
null, o.a.createElement(y.a,
{ classes: { paper: "dailog"
}, open: "test" === $, disableBackdropClick: !0, onClose: ha, disableEscapeKeyDown: !0
}, o.a.createElement(E.a,
null, o.a.createElement("div",
{ className: "modal-wrap modal-md nCB modal-dock"
}, o.a.createElement("button",
{ className: "icon icon-close", type: "button", id: "close", onClick: e => { ha(e), Te(It, tt)
}
}), o.a.createElement("div",
null, o.a.createElement("section",
{ style: { padding: "0 20px"
}
}, o.a.createElement("p",
{ style: { fontWeight: 700, fontSize: "2rem"
}
}, m.a.NEUCOINS), o.a.createElement("p",
{ className: "enterNeu"
}, m.a.NUM_OF_NEU_COINS), o.a.createElement("p",
{ style: { marginTop: "1rem"
}
}, o.a.createElement("span",
{ style: { fontWeight: 700, fontSize: "2rem"
}
}, V)), o.a.createElement("p",
null, o.a.createElement("span",
null,
"NeuCoins Available")), o.a.createElement("section",
{ className: "card-form align-center login-card".concat(Na)
}, o.a.createElement("div",
{ className: "card-input-container nc-remove-top-margin card-input-login".concat(Na,
" nCInput")
}, o.a.createElement("input",
{ className: "mobile-input-box input-login", type: "text", placeholder: "Enter NeuCoins", value: ht, name: "number", autoFocus: !0, autoComplete: "off", role: "presentation", onKeyDown: e => {
"Enter" === e.key && document.getElementById("apply-neu-btn").click()
}, onChange: e => { bt(""), (e => { var t, a, l; let o = "." === (null === e || void 0 === e || null === (t = e.target) || void 0 === t ? void 0 : t.value) ? "0.": null === e || void 0 === e || null === (a = e.target) || void 0 === a ? void 0 : a.value; o = null === (l = o) || void 0 === l ? void 0 : l.replace(/[a-z
]/gi,
""), w.a.NEUCOINS_DECIMAL_FLAG && /^\d*\.\d\d\d+/.test(o) && (o = Object(N.J)(o)), (w.a.NEUCOINS_DECIMAL_FLAG && /^\d*\.\d{
0,
2
}$/.test(o) || /^[
1-9
][
0-9
]*$/.test(o) || "" === o || "0" === o) && (dt(!1), St(o)), w.a.NEUCOINS_DECIMAL_FLAG && isNaN(o) ? (bt("Hey, you can to enter only numbers and/or one decimal"), dt(!0)) : ("" === o || w.a.NEUCOINS_DECIMAL_FLAG && o < 1) && (bt("Hey, you need at least 1 NeuCoin to pay using NeuCoins"), dt(!0))
})(e)
}
}))), o.a.createElement("div",
{ className: "form-group"
}, Ot && o.a.createElement("span",
{ className: "error ncErr"
}, Ot))), o.a.createElement("div",
{ className: "act-btn"
}, o.a.createElement("button",
{ className: "btn btn-default ".concat(sessionStorage.calledFromTDNative ? "": "login-btn-mob nCConfirm",
" ").concat(rt ? "disabled": ""), id: "apply-neu-btn", type: "submit", disabled: rt, onClick: e => { (e => { var t; const a = null === K || void 0 === K || null === (t = K.totalPrice) || void 0 === t ? void 0 : t.value, l = Sa(); var o; if (a - l - ht === 0 || 0 !== Math.floor(a - l - ht)) if (w.a.NEUCOINS_DECIMAL_FLAG ? parseFloat(a) > parseFloat(V) ? parseFloat(ht) > parseFloat(V) : parseFloat(ht) > parseFloat(a) : Number.isInteger(a) ? a > V ? ht > V : ht > a : a > V ? ht > V : ht > Math.floor(a) - 1) 0 !== _t || localStorage.appliedOfferPromoId || 0 !== ie.length ? bt(w.a.NEUCOINS_DECIMAL_FLAG || Number.isInteger(a) ? a > V ? m.a.NEU_COINS_EXCEEDED : "Hey, you can use upto ".concat(a,
" NeuCoins for this transaction") : a > V ? m.a.NEU_COINS_EXCEEDED : "Hey, you can use upto ".concat(Math.floor(a) - 1,
" NeuCoins for this transaction")) : bt("Hey, you can use upto ".concat(null === K || void 0 === K || null === (o = K.totalPriceWithTax) || void 0 === o ? void 0 : o.value,
" NeuCoins for this transaction")); else if (ie.length > 0 && "" !== ht) { const t = Sa(), l = w.a.NEUCOINS_DECIMAL_FLAG ? Number.isInteger(a - t) ? a - t : Math.floor(a - t) - 1 : a - t; l < ht ? bt("You can use upto ".concat(l,
" NeuCoins for this transaction.")) : ha(e, ht)
} else "" !== ht && ha(e, ht); else bt("Hey, you can use ".concat(a - l,
" NeuCoins for this transaction"))
})(e), ke(It, tt)
}
}, m.a.CONFIRM_NEU)))))), o.a.createElement(y.a,
{ classes: { paper: "dailog"
}, open: Rt, disableBackdropClick: "true", disableEscapeKeyDown: "true"
}, o.a.createElement("button",
{
"data-testid": "closeIcon", className: "icon icon-close", type: "button", onClick: e => { Da()
}
}), o.a.createElement(E.a,
null, o.a.createElement("div",
{ className: "modal-wrap modal-sm"
}, o.a.createElement("div",
{ className: "cp-confirmation-modal"
}, o.a.createElement("div",
{ className: "confirmation-modal-desc"
}, o.a.createElement("p",
null,
"Your entire balance of ", (() => { if (localStorage.getItem("gv_Activacted_details")) { var e; const t = JSON.parse(localStorage.getItem("gv_Activacted_details")); return null === t || void 0 === t || null === (e = t.gvDetails[
0
]) || void 0 === e ? void 0 : e.cardBal
} return ""
})(),
" will be used. Do you want to continue?")), o.a.createElement("div",
{ className: "action-wrap"
}, o.a.createElement("button",
{
"data-testid": "proceedBtn", className: "btn btn-default", onClick: () => { (() => { Lt(!1); const e = JSON.parse(localStorage.getItem("gv_Activacted_details")), t = { gvDetails: null === e || void 0 === e ? void 0 : e.gvDetails, gvType: te
}; ca(e, t)
})()
}
},
"Continue"), o.a.createElement("button",
{
"data-testid": "cancelBtn", className: "btn btn-secondary", onClick: e => { Da()
}
},
"Remove")))))), o.a.createElement(p, null), o.a.createElement("div",
{ className: "cp-payment"
}, o.a.createElement("div",
{ className: "cp-section first"
}, o.a.createElement("div",
{ className: "container"
}, o.a.createElement("div",
{ className: "payment-item", style: { display: "" === lt ? "none": "block"
}
}, o.a.createElement("h2",
{ className: "page-heading", style: { margin: D ? "3rem 0 2rem": "0 0 2rem"
}
}, m.a.CHOOSE_PAYMENT_METHOD), o.a.createElement("div",
{ className: "cp-accordian payment-accord"
}, aa() && !ma() && (null === B || void 0 === B || null === (t = B.groupLoyaltyProgramDetails) || void 0 === t ? void 0 : t.length) > 0 && (null === B || void 0 === B || null === (a = B.groupLoyaltyProgramDetails[
0
]) || void 0 === a ? void 0 : a.loyaltyPoints) >= 1 && o.a.createElement("div",
{ className: "neu-lp-bal"
}, o.a.createElement("div",
{ className: "cp-checkbox neuCheck", style: { marginLeft: f.isMobile ? "0rem": "2.8rem"
}
}, o.a.createElement("div",
{ className: "cp-checkbox-item"
}, w.a.NEUCOINS_DECIMAL_FLAG ? !Wt(null === B || void 0 === B ? void 0 : B.blockedRedeemption) && o.a.createElement("input",
{ type: "checkbox", name: "select-contribute", id: "neuCoinsRedeem", onChange: e => { var t; return Ea(e, Object(N.J)(null === B || void 0 === B || null === (t = B.groupLoyaltyProgramDetails[
0
]) || void 0 === t ? void 0 : t.loyaltyPoints))
}
}) : o.a.createElement("input",
{ type: "checkbox", name: "select-contribute", id: "neuCoinsRedeem", onChange: e => { var t; return Ea(e, Math.floor(null === B || void 0 === B || null === (t = B.groupLoyaltyProgramDetails[
0
]) || void 0 === t ? void 0 : t.loyaltyPoints))
}
}), o.a.createElement("label",
{ htmlFor: "neuCoinsRedeem"
}, o.a.createElement("span",
{ className: "check neuCoins"
}), o.a.createElement("div",
{ className: "paymentOffer-Image", style: { marginLeft: "1.5rem"
}
}, o.a.createElement("img",
{ src: Object(k.c)(w.a.MEDIA_URL + "/Croma%20Assets/CMS/neu_logo_tnish4.png"), alt: ""
})))), o.a.createElement("div",
{ style: { padding: "1.5rem 0rem"
}
}, o.a.createElement("span",
{ style: { fontWeight: "bold", marginRight: "2rem"
}
},
"NeuCoins"),
" ",
"1 NeuCoin = 1 Rupee",
" ", V > 0 ? o.a.createElement(o.a.Fragment,
null, o.a.createElement("span",
{ className: "neuCoinsBal"
},
"Using ", o.a.createElement("span",
{ className: "usedNeucoins"
}, w.a.NEUCOINS_DECIMAL_FLAG ? Object(N.J)(Number(It)) || 0 : It || 0,
" ",
"NeuCoins",
" "), o.a.createElement("span",
{ className: "nCBalance"
},
"(Balance:",
" ", w.a.NEUCOINS_DECIMAL_FLAG ? Object(N.J)((V - It).toFixed(2)) : Math.floor(V - It),
" ",
"NeuCoins)",
" ", o.a.createElement("span",
{ className: "neucoin_edit-container"
}, o.a.createElement("a",
{ onClick: () => { ee("test"), Pe(It, tt)
}, style: { color: "#088466", textDecoration: "underline"
}, className: (w.a.NEUCOINS_DECIMAL_FLAG ? (null === (u = Object(N.J)(null === B || void 0 === B || null === (g = B.groupLoyaltyProgramDetails[
0
]) || void 0 === g ? void 0 : g.loyaltyPoints)) || void 0 === u ? void 0 : u.length) > 4 && (null === It || void 0 === It ? void 0 : It.toString().length) >= 4 : Math.floor(null === B || void 0 === B || null === (h = B.groupLoyaltyProgramDetails[
0
]) || void 0 === h ? void 0 : h.loyaltyPoints).toString().length > 4) ? "reAlignNeuPay": ""
},
"Edit"))))) : o.a.createElement("span",
{ className: "neuCoinsBal"
}, w.a.NEUCOINS_DECIMAL_FLAG ? Object(N.J)(null === B || void 0 === B || null === (S = B.groupLoyaltyProgramDetails[
0
]) || void 0 === S ? void 0 : S.loyaltyPoints) : Math.floor(null === B || void 0 === B || null === (I = B.groupLoyaltyProgramDetails[
0
]) || void 0 === I ? void 0 : I.loyaltyPoints),
" ",
"NeuCoins available"))), Wt(null === B || void 0 === B ? void 0 : B.blockedRedeemption) ? o.a.createElement("span",
{ style: { marginBottom: "2rem", marginLeft: "3rem", marginRight: "2rem", display: "block", color: "red"
}
}, m.a.NEUCOINS_FRAUD_MESSAGE) : o.a.createElement("span",
{ style: { marginBottom: "2rem", marginLeft: "9rem", display: wt, color: "red"
}
},
"Payable order value is \u20b9 0")), aa() && !ma() && o.a.createElement(r.a,
{ onChange: sa("panel1"), expanded: "panel1" === oe, className: "accordian-item", id: "panel1"
}, o.a.createElement(s.a,
{ expandIcon: o.a.createElement(v.a, null),
"aria-controls": "panel1bh-content", id: "panel1bh-header"
}, o.a.createElement(c.a,
{ component: "span", className: "accorian-title"
}, m.a.GV_HEADING)), o.a.createElement(d.a,
null, o.a.createElement(c.a,
{ component: "span", className: "accordian-content"
}, o.a.createElement("div",
{ className: "form-list add-card-form add-gv-card", id: "gv_gc_div"
}, o.a.createElement("ul",
{ className: "list col1"
}, o.a.createElement("li",
{ className: "item"
}, o.a.createElement("div",
{ className: "form-group"
}, o.a.createElement("label",
{ className: "lbl-title"
}, m.a.GV_SELECT_TITLE), o.a.createElement("div",
{ className: "cp-select"
}, o.a.createElement(n.a,
{ id: "selectPayId", value: te, name: "cardType", MenuProps: { getContentAnchorEl: null, anchorOrigin: { vertical: "bottom", horizontal: "left"
}
}, onChange: e => { var t, a; return a = null === e || void 0 === e || null === (t = e.target) || void 0 === t ? void 0 : t.value, le(a), he(""), ve(""), fe(""), ga(),
"" !== Me.message && Be({ message: "", type: "success"
}),
"Vouchagram" === a ? (Ae("voucher:selected"), Oe("Voucher"), Je(!0)) : "GiftCard" === a && (Ae("gift card:selected"), Oe("Gift Card"), Je(!0)), void ("Vouchagram" === a && document.getElementById("cardNo") && "" !== document.getElementById("cardNo").value || document.getElementById("cardNo") && "" !== document.getElementById("cardNo").value ? document.getElementById("cardNo").value = "": document.getElementById("cardPin") && "" !== document.getElementById("cardPin").value && (document.getElementById("cardPin").value = ""))
}
}, o.a.createElement(i.a,
{ value: "Select", name: "scheduleTime1", disabled: !0
},
"Select"), o.a.createElement(i.a,
{ value: "GiftCard", name: "scheduleTime2", disabled: !!(ie && ie.length > 0 && "Vouchagram" === te)
},
"Gift Card"), o.a.createElement(i.a,
{ value: "Vouchagram", name: "scheduleTime3", disabled: !!(ie && ie.length > 0 && "GiftCard" === te)
},
"Voucher")),
"" !== Ee && o.a.createElement("span",
{ className: "error"
}, Ee))))), ("Select" !== te || localStorage.getItem("gv_type")) && o.a.createElement("ul",
{ className: "list col2"
}, o.a.createElement("li",
{ className: "item"
}, o.a.createElement("div",
{ className: "form-group"
}, o.a.createElement("label",
{ className: "lbl-title"
},
"GiftCard" === te ? m.a.GV_CARD_NO : m.a.GV_VOUCHER_NO), o.a.createElement("input",
{ id: "cardNo", className: "formControl", type: "text", maxLength: "".concat("Vouchagram" !== te ? "16": "10"), onChange: e => { jt("GiftCard" === te ? e.target.value.replace(/[^\d
]/g,
"") : e.target.value.replace(/[^0-9a-zA-Z
]/g,
""))
}, value: Ft, placeholder: "Enter the ".concat("Vouchagram" !== te ? "16 digit Gift card": "10 digit Voucher",
" number"), onClick: () => { ve("")
}
}),
"" !== ce && o.a.createElement("span",
{ className: "error"
}, ce))),
"Vouchagram" !== te && o.a.createElement("li",
{ className: "item"
}, o.a.createElement("div",
{ className: "form-group"
}, o.a.createElement("label",
{ className: "lbl-title"
}, m.a.GV_CARD_PIN), o.a.createElement("input",
{ id: "cardPin", className: "formControl", type: "text", maxLength: "6", value: xt, onChange: e => { Mt(e.target.value.replace(/[^\d
]/g,
""))
}, placeholder: "Enter Card Pin", onClick: () => { fe("")
}
}),
"" !== pe && o.a.createElement("span",
{ className: "error"
}, pe)))), ("Select" !== te || localStorage.getItem("gv_type")) && o.a.createElement("div",
{ className: "action-wrap apply-gv-btn"
}, ie.length > 0 && Ie || 5 === ie.length ? o.a.createElement("button",
{ className: "btn gv-disabled", type: "button"
}, m.a.APPLY_BTN) : o.a.createElement("button",
{ className: "btn btn-default", type: "button", onClick: () => { const e = JSON.parse(localStorage.getItem("gv_details")); if (e && 5 === e.gvDetails.length) return void Be({ message: m.a.MAXIMUM_CARDS_USED, type: "failure"
}); const t = document.getElementById("cardNo") && document.getElementById("cardNo").value, a = document.getElementById("cardPin") && document.getElementById("cardPin").value; if ("" !== Me.message && Be({ message: "", type: "success"
}),
"Select" === te) he(m.a.CHOOSE_GV_ERR); else if ("" === t) he(""), ve("Vouchagram" === te ? m.a.ENTER_VOUCHERNO_ERR : m.a.ENTER_CARDNO_ERR); else if ("GiftCard" !== te || /^\d{
16
}$/.test(t)) if ("Vouchagram" !== te && "" === a) he(""), ve(""), fe(m.a.ENTER_PIN_ERR); else if ("Vouchagram" === te || /^\d{
6
}$/.test(a)) { ve(""), fe(""); const e = { gvDetails: [
{ cardBal: 0, cardNo: t.toUpperCase(), cardPin: a, cardType: "", isValid: !1, respMsg: ""
}
]
}, l = { gvDetails: e.gvDetails, gvType: te
}; let o; ie && ie.length > 0 && (o = [...e.gvDetails, ...ie
], l.gvDetails = o), va(l)
} else he(""), ve(""), fe(m.a.VALID_PIN_ERR); else he(""), ve(m.a.VALID_CARD_ERR)
}
}, m.a.APPLY_BTN)), (ie.length > 0 || "" !== Me.message) && o.a.createElement("div",
{ className: "cp-ship-opt applied-gv"
},
"" !== Me.message && o.a.createElement("div",
{ className: "custom-err-msg gc-gv-".concat(Me.type)
}, Me.message), Ve && o.a.createElement("div",
{ className: "custom-info-msg"
}, o.a.createElement("span",
{ className: "icon-about payment-info-span"
}), Ve), ie && ie.length > 0 && o.a.createElement("h2",
{ className: "title"
},
"Applied Gift ".concat("GiftCard" === te ? "Cards": "Vouchers",
":")), ie && ie.length > 0 && o.a.createElement(o.a.Fragment,
null, ie && Array.isArray(ie) && ie.map((e, t) => o.a.createElement("div",
{ className: "grid-container-payments"
}, o.a.createElement("div",
{ className: "gc-cardno-container"
}, o.a.createElement("span",
{ className: "icon-tick applied-gv-tick"
}), e.cardNo), o.a.createElement("div",
{ className: "gc-amt-container"
}, o.a.createElement("span",
{ className: "gc-amt"
},
"\u20b9 ", e.cardBal)), o.a.createElement("div",
{ className: "gc-del-container"
}, o.a.createElement("span",
{ className: "iconDelete icon icon-delete gv-del-btn", onClick: () => (e => { At("none"); let t = null; const a = localStorage.gv_type, l = JSON.parse(localStorage.gv_details); 1 === ie.length && ("GiftCard" === localStorage.gv_type && (t = pa(ie[
0
].cardProgramGroupType)), se(void 0), vt(!0), Pt(!1)), ie.splice(e,
1); const o = { gvDetails: ie, gvType: te
}; if (ie && ie.length > 0 ? document.getElementById("cardNo") ? document.getElementById("cardNo").value = ie[
0
].cardNo : document.getElementById("cardPin") && (document.getElementById("cardPin").value = ie[
0
].cardPin) : (ga(), document.getElementById("cardNo") ? document.getElementById("cardNo").value = "": document.getElementById("cardPin") && (document.getElementById("cardPin").value = ""), le("Select"), localStorage.removeItem("gv_type"), localStorage.removeItem("gv_details")),
"GiftCard" === a) { const a = [...ie
]; localStorage.cardProgramGroupType = t || pa(l.gvDetails[e
].cardProgramGroupType), l.gvDetails = ie, localStorage.gv_details = JSON.stringify(l), re(a)
} else va(o,
"removeCard"); Be({ message: "", type: "success"
}), Ue("")
})(t)
}))))), (ie.length > 0 && ie.length < 5 && !Ie || "" !== Me.message && 0 === ie.length) && o.a.createElement("div",
{ className: "action-wrap gv-action-buttons"
}, o.a.createElement("button",
{ className: "btn btn-default add-gv-btn", type: "button", onClick: () => {
"GiftCard" === te ? (document.getElementById("cardNo").value = "", document.getElementById("cardPin").value = "") : document.getElementById("cardNo") && (document.getElementById("cardNo").value = ""), ga(), Be({ message: "", type: "success"
}), Ue("")
}
},
"GiftCard" === te ? m.a.ADD_ANOTHER_CARD : m.a.ADD_ANOTHER_VOUCHER))), He && ze && o.a.createElement("div",
{ className: "pod-eligible-alert"
}, o.a.createElement(Ge, null), o.a.createElement("span",
null, m.a.POD_PAYMENT_CHECK)))))), o.a.createElement("div",
{ style: { display: "flex", justifyContent: f.isMobile ? "space-between": "left", marginBottom: "2rem"
}
}, Vt > 0 && o.a.createElement("span",
{ style: { display: "flex", alignItems: "center", marginRight: "2.5rem", marginLeft: f.isMobile ? "0.5rem": "3.5rem"
}
},
"Payable amount: ", o.a.createElement("span",
{ className: "payment-payable-amt"
},
"\u20b9" + Vt.toFixed(2).replace(/\d(?=(\d{
3
})+\.)/g,
"$&,"))), o.a.createElement("button",
{ type: "button", className: "btn btn-default uniPayNow", onClick: () => { var e; (() => { var e, t, a; const l = Sa(), o = null === Tt || void 0 === Tt || null === (e = Tt.totalPrice) || void 0 === e ? void 0 : e.value; It && (null === Tt || void 0 === Tt || null === (t = Tt.newCoinsApplied) || void 0 === t ? void 0 : t.value) === o ? Oa() : 0 === de && (l >= o || (null === Tt || void 0 === Tt || null === (a = Tt.newCoinsApplied) || void 0 === a ? void 0 : a.value) > 0 && (null === Tt || void 0 === Tt ? void 0 : Tt.hasOwnProperty("gvResponseDetailsWsDto"))) ? ya() : da("",
"PAYNOW", $e, !0, Number(It), !1)
})(), Ce(It, tt,
null === b || void 0 === b || null === (e = b.cartData) || void 0 === e ? void 0 : e.entries)
}, disabled: nt
}, m.a.PAY_NOW)), o.a.createElement(r.a,
{ onChange: sa("panel2"), className: "accordian-item", id: "panel2", expanded: "panel2" === oe
}, o.a.createElement(s.a,
{ expandIcon: o.a.createElement(v.a, null),
"aria-controls": "panel2bh-content", id: "panel2bh-header"
}, o.a.createElement(c.a,
{ component: "span", className: "accorian-title"
},
"Payment")), o.a.createElement(d.a,
null, o.a.createElement(c.a,
{ component: "span", className: "accordian-content"
}, o.a.createElement("div",
{ id: "juspay_div", className: "payment-iframe", style: { width: "100%", height: "100%"
}
})))))), o.a.createElement("div",
{ className: "amount-offer-wrap"
}, o.a.createElement(Se,
{ callPaymentDetails: da, calledPaymentDetails: Re, callOfferMsd: O, payCartData: K, balAmountPayable: de, gvDetailsArr: ie, cartData: b, loader: Qe, setAppliedOffersave: et, orderIdData: tt, isDesktop: D, backOffersModal: () => { ot("show")
}, setBalAmountPayable: se, neuPassInfo: C, setCalledPaymentDetails: xe, refreshFlag: st, setRefreshFlag: ct, allGCGVRemoved: ut, appliedOfferSave: $e, showToastMsg: F, paymentNeuCoins: Number(It), setOnlyNeuCoinsApplied: Dt, setNcCheck: Pt, setCartModResp: kt, historyPayment: P, retryPayment: T, neuPassInfoData: A, setCustomerLoyaltyDetails: G, customerLoyaltyDetails: B, setAllGCRVRemoved: vt, retryPaymentOfferData: R, setRetryPaymentOfferData: L, updateDeliveryDate: yt, setValidateDisable: _e, paymentDataShow: Bt, setPaymentDataShow: Gt, netPayableAmount: Vt
}), o.a.createElement(We,
{ open: x, setOpen: M, payCartData: Q, slotArr: mt, setSlotArr: pt, omsData: gt, setUpdateDeliveryDate: Et, setOmsData: ft, setAllFulfillment: Xt, cartRes: _
}))))))
})); t.default = function (e) { var t, n, i; const r = Object(ae.useHistory)(), d = Object(Ze.a)(), s = Object(N.D)(), c = Object(l.useRef)(null),
[u, v
] = Object(l.useState)(""),
[p, g
] = Object(l.useState)(""),
[y, E
] = Object(l.useState)(""),
[h, S
] = Object(l.useState)({ promoCode: "", paymentMode: "", provider: ""
}),
[I, O
] = Object(l.useState)(!0), b = null === r || void 0 === r ? void 0 : r.location, _ = void 0 !== b && void 0 !== (null === b || void 0 === b ? void 0 : b.state) && void 0 !== (null === b || void 0 === b ? void 0 : b.state.paymentType) && "retry" === (null === b || void 0 === b || null === (t = b.state) || void 0 === t ? void 0 : t.paymentType) && void 0 !== (null === b || void 0 === b || null === (n = b.state) || void 0 === n ? void 0 : n.orderId), D = o.a.lazy(() => a.e(46).then(a.bind(null,
1078))); Object(l.useEffect)(() => { if (sessionStorage.paymentBack && !_ || sessionStorage.navigatedCartFromPayment) return; C(); null === localStorage.getItem("access_token") && (!sessionStorage.calledFromTDNative || sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? sessionStorage.calledFromTDNative && sessionStorage.calledFromCheckout && JSON.parse(sessionStorage.calledFromCheckout) ? window.location.replace("cart") : r.push("/cart") : Object(N.k)("ERROR",
"",
"/cart",
"",
{ reason: "access_token is null"
})), j(), P()
},
[]); const C = () => { sessionStorage.isPageLoadOnly || sessionStorage.setItem("isPageLoadOnly", !0)
}, P = () => { const e = (new Date).getTime(), t = { page_type: "payment", content_type: "product", action_name: "view", event_name: "page_view", correlation_id: "sssaasss", medium: "pixel", metadata: {}, source: "CROMA", user_id_type: [
"".concat(d.user_id_type)
], user_id: [
"".concat(d.user_id)
], mad_uuid: "".concat(d.mad_uuid), utm: { utm_source: "", utm_medium: "", utm_campaign: ""
}, epoch: "".concat(e)
}; Object(ze.a)(t)
}, T = (e, t, a, l) => { const o = { Usersource: "undefined" === typeof Storage || "tcp" !== localStorage.getItem("userSource") && "tcp-pwa" !== localStorage.getItem("userSource") ? "null": "TCP", headers: a
}; Object(z.h)(Object(N.F)(e, t), o, l).then(e => { var t; "success" === e.status && (l ? Object(Qe.a)(null === b || void 0 === b || null === (t = b.state) || void 0 === t ? void 0 : t.orderId).then(t => { var a; if (null === t || void 0 === t || null === (a = t.data) || void 0 === a ? void 0 : a.RetryPayment) { var l, o, n, i, r, d, s, c, u, v; if (K(null === e || void 0 === e ? void 0 : e.data).then(e => { E(e)
}),
null === e || void 0 === e || null === (l = e.data) || void 0 === l ? void 0 : l.paymentDetailsForOfferData) S({ promoCode: null === e || void 0 === e || null === (r = e.data) || void 0 === r || null === (d = r.paymentDetailsForOfferData) || void 0 === d ? void 0 : d.promoCode, paymentMode: null === e || void 0 === e || null === (s = e.data) || void 0 === s || null === (c = s.paymentDetailsForOfferData) || void 0 === c ? void 0 : c.paymentMode, provider: null === e || void 0 === e || null === (u = e.data) || void 0 === u || null === (v = u.paymentDetailsForOfferData) || void 0 === v ? void 0 : v.provider
}); x(null === e || void 0 === e || null === (o = e.data) || void 0 === o ? void 0 : o.allOfferSavingsData,
null === e || void 0 === e || null === (n = e.data) || void 0 === n || null === (i = n.paymentDetailsForOfferData) || void 0 === i ? void 0 : i.promoCode)
}
}) : K(null === e || void 0 === e ? void 0 : e.data).then(e => { E(e)
}))
})
}, k = (e, t, a) => { var l; (async function (e) { try { const t = localStorage.getItem("customer_hash"), a = localStorage.getItem("access_token"), l = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"), o = localStorage.getItem("csc_code"), n = {
"Content-Type": "application/json", client_id: "CROMA-WEB-APP", customerHash: t, accessToken: a
}, i = "useraccount/allchannels/transaction/v1/".concat(l ? o : t) + H.xc + "?orderId=".concat(e,
"&fields=FULL"), r = await U.HttpService.get(i,
{ headers: n
}); return r.status >= 200 && r.status < 300 ? { status: "success", data: r.data
} : { status: "error", data: [], statusCode: r.status
}
} catch (t) { return { status: "error", data: [], statusCode: "network_failure"
}
}
})(null === b || void 0 === b || null === (l = b.state) || void 0 === l ? void 0 : l.orderId).then(l => { var o, n; const i = null === (o = l.data) || void 0 === o || null === (n = o.paymentDetailsForOfferData) || void 0 === n ? void 0 : n.promoCode; var d; i ? Object(Qe.a)(null === b || void 0 === b || null === (d = b.state) || void 0 === d ? void 0 : d.orderId).then(e => { var o, n, r, d; (null === e || void 0 === e || null === (o = e.data) || void 0 === o ? void 0 : o.RetryPayment) && Object(z.q)(Object(N.F)(F(), t), L(null === (n = l.data) || void 0 === n || null === (r = n.paymentDetailsForOfferData) || void 0 === r ? void 0 : r.paidAmount,
null === (d = l.data) || void 0 === d ? void 0 : d.allOfferSavingsData, i), R(), a).then(e => { var t, a, l; K(null === e || void 0 === e ? void 0 : e.data).then(e => { E(e)
}), x(null === e || void 0 === e || null === (t = e.data) || void 0 === t ? void 0 : t.allOfferSavingsData,
null === e || void 0 === e || null === (a = e.data) || void 0 === a || null === (l = a.paymentDetailsForOfferData) || void 0 === l ? void 0 : l.promoCode)
})
}) : "error" === (null === l || void 0 === l ? void 0 : l.status) ? (A(m.a.RETRY_OFFER_FAIL_MSG, ye.f.ERROR), setTimeout(() => { r.push("/my-account/orders")
},
4e3)) : T(e, t,
{}, a)
})
}, A = function (e, t) { let a = arguments.length > 2 && void 0 !== arguments[
2
] && arguments[
2
]; c && c.current && c.current.closeToast(), v(t), g(e), a && localStorage.setItem("setAutoHide", a), c && c.current && c.current.openToast()
}, R = () => { const e = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); if (e && "" !== e) { var t; const a = localStorage.getItem("access_token"), l = null === e || void 0 === e || null === (t = e.customerInfo) || void 0 === t ? void 0 : t.customerHash, o = document.head.querySelector("[name=tdl-sso-client_id][content]"); return { client_id: o ? o.content : w.a.CLIENT_ID, accessToken: a, customerHash: l, isPaymentPage: "true", Usersource: "undefined" === typeof Storage || "tcp" !== localStorage.getItem("userSource") && "tcp-pwa" !== localStorage.getItem("userSource") ? "null": "TCP"
}
}
}, L = (e, t, a) => ({ toBeAppliedPromoIdList: [...t.map(e => e.promotionId)
], cromaPaymentRequestWsDTOList: [
{ paidAmount: e, promoCode: ""
}
]
}), F = () => { let e = ""; const t = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); if (t && "" !== t) { var a; const n = null === t || void 0 === t || null === (a = t.customerInfo) || void 0 === a ? void 0 : a.csc_code, i = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"); var l; if (i && _) e += "".concat(n,
"/carts/").concat(null === b || void 0 === b || null === (l = b.state) || void 0 === l ? void 0 : l.orderId,
"/cart-modification?isRetry=true&forceRecalculate=true&fields=FULL"); else if (!i && _) { var o; e += "".concat(t.customerInfo.customerHash,
"/carts/").concat(null === b || void 0 === b || null === (o = b.state) || void 0 === o ? void 0 : o.orderId,
"/cart-modification?isRetry=true&forceRecalculate=true&fields=FULL")
}
} return e
}, j = () => { const e = localStorage.getItem("customer_hash"), t = localStorage.getItem("csc_code"), a = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"); let l = ""; if (e && "" !== e || t && "" !== t) { var o, n; const e = Object(N.a)(localStorage.getItem("cr-cache:user-data"),
"token"); var i, r; if (e && "" !== e && _) l += a ? "".concat(t,
"/carts/").concat(null === b || void 0 === b || null === (i = b.state) || void 0 === i ? void 0 : i.orderId,
"/getcart?isRetry=true&fields=FULL") : "".concat(e.customerInfo.customerHash,
"/carts/").concat(null === b || void 0 === b || null === (r = b.state) || void 0 === r ? void 0 : r.orderId,
"/getcart?isRetry=true&fields=FULL"); else if (e && "" !== e && (null === e || void 0 === e || null === (o = e.wishListInfo) || void 0 === o || null === (n = o.cartWsDto) || void 0 === n ? void 0 : n.code)) { var d, c, u, v, m; l += a ? "".concat(t,
"/carts/").concat(null === e || void 0 === e || null === (d = e.wishListInfo) || void 0 === d || null === (c = d.cartWsDto) || void 0 === c ? void 0 : c.code,
"/getcart?fields=FULL") : "".concat(null === e || void 0 === e || null === (u = e.customerInfo) || void 0 === u ? void 0 : u.customerHash,
"/carts/").concat(null === e || void 0 === e || null === (v = e.wishListInfo) || void 0 === v || null === (m = v.cartWsDto) || void 0 === m ? void 0 : m.code,
"/getcart?fields=FULL")
}
} "" !== l && (_ ? k(l, s, _) : T(l, s,
{}, _))
}, x = (e, t) => { var a; localStorage.removeItem("appliedOfferLogo"), localStorage.cartOffersCount = e && t ? e.length - 1 : (null === e || void 0 === e ? void 0 : e.length) || 0, localStorage.cartOffersCollection = JSON.stringify(e && t ? (null === e || void 0 === e || null === (a = e.filter(e => (null === e || void 0 === e ? void 0 : e.promotionId) !== t)[
0
]) || void 0 === a ? void 0 : a.promotionId) || [] : (null === e || void 0 === e ? void 0 : e.map(e => null === e || void 0 === e ? void 0 : e.promotionId)) || []), localStorage.removeItem("appliedOfferPromoId")
}, M = e => { e.preventDefault(), O(!1)
}; return o.a.createElement(o.a.Fragment,
null, o.a.createElement(o.a.Suspense,
{ fallback: o.a.createElement(o.a.Fragment, null)
}, sessionStorage.calledFromTDNative && JSON.parse(sessionStorage.calledFromTDNative) && o.a.createElement(D, null)), o.a.createElement("div",
{ className: f.isDesktop ? "bs-content hide-x-scroll payment-page-height ": "bs-content hide-x-scroll"
}, o.a.createElement(Ve.a,
{ ref: c, varient: u, msg: p
}),
"" !== y && o.a.createElement(o.a.Fragment,
null, o.a.createElement(et,
{ callOfferMsd: function () { let e = arguments.length > 0 && void 0 !== arguments[
0
] ? arguments[
0
] : "view_all", t = arguments.length > 1 && void 0 !== arguments[
1
] ? arguments[
1
] : ""; const a = (new Date).getTime(), l = { page_type: "payment", content_type: "offer", event_name: "".concat(e), action_name: "click", correlation_id: "sssaasss", medium: "pixel", metadata: {}, source: "CROMA", user_id_type: [
"".concat(d.user_id_type)
], user_id: [
"".concat(d.user_id)
], mad_uuid: "".concat(d.mad_uuid), utm: { utm_source: "", utm_medium: "", utm_campaign: ""
}, epoch: "".concat(a)
}; "view_all" !== e && (l.content_info = { source_id: t
}), Object(ze.a)(l)
}, cartData: e.location.state, cartRes: y, isDesktop: f.isDesktop, historyPayment: b, retryPayment: _, neuPassInfoData: s, retryPaymentOfferData: h, setRetryPaymentOfferData: S, showToastMsg: A, toasterRef: c, varient: u, msg: p
}), (null === y || void 0 === y || null === (i = y.entries) || void 0 === i ? void 0 : i.length) > 0 && (null === y || void 0 === y ? void 0 : y.entries.map(e => { if ((null === e || void 0 === e ? void 0 : e.exchangeAmount) && (null === e || void 0 === e ? void 0 : e.isExchangeProductBonusExpired) && I) return o.a.createElement($e.a,
{ bonusPopup: I, bonusExpMsg: M
})
})))), o.a.createElement(Xe.a,
null, o.a.createElement("title",
null,
"Croma Payment Page"), o.a.createElement("meta",
{ name: "title", content: ""
}), o.a.createElement("meta",
{ name: "description", content: ""
}), o.a.createElement("meta",
{ name: "keywords", content: ""
}), o.a.createElement("script",
{ src: "https://public.releases.juspay.in/hyper-sdk-web/HyperServices.js", clientId: "croma", service: "in.juspay.hyperpay"
})))
}
},
916: function (e, t, a) {
"use strict"; var l = a(0), o = a.n(l), n = a(435), i = a(437), r = a(1); t.a = e => { let { bonusPopup: t, bonusExpMsg: a
} = e; return o.a.createElement(o.a.Fragment,
null, o.a.createElement(n.a,
{ classes: { paper: !r.a.CROMA_DARK_THEME && "dark-theme dailog"
}, open: t, disableBackdropClick: "true", disableEscapeKeyDown: "true"
}, o.a.createElement("button",
{
"data-testid": "closeIcon", className: "icon icon-close", type: "button", onClick: e => { a(e)
}
}), o.a.createElement(i.a,
null, o.a.createElement("div",
{ className: "modal-wrap modal-sm"
}, o.a.createElement("div",
{ className: "cp-confirmation-modal"
}, o.a.createElement("div",
{ className: "confirmation-modal-desc"
}, o.a.createElement("p",
{ style: { textAlign: "center"
}
},
"Your limited-time exchange bonus offer has expired")), o.a.createElement("div",
{ className: "action-wrap"
}, o.a.createElement("button",
{
"data-testid": "proceedBtn", className: "btn btn-default", onClick: e => { a(e)
}
},
"ok")))))))
}
},
917: function (e, t, a) {
"use strict"; a.d(t,
"a", (function () { return s
})); var l, o = a(0), n = a.n(o); const i = [
"svgRef",
"title"
]; function r() { return (r = Object.assign ? Object.assign.bind() : function (e) { for (var t = 1; t < arguments.length; t++) { var a = arguments[t
]; for (var l in a) ({}).hasOwnProperty.call(a, l) && (e[l
] = a[l
])
} return e
}).apply(null, arguments)
} const d = e => { let { svgRef: t, title: a
} = e, o = function (e, t) { if (null == e) return {}; var a, l, o = function (e, t) { if (null == e) return {}; var a = {}; for (var l in e) if ({}.hasOwnProperty.call(e, l)) { if (-1 !== t.indexOf(l)) continue; a[l
] = e[l
]
} return a
}(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (l = 0; l < n.length; l++)a = n[l
],
-1 === t.indexOf(a) && {}.propertyIsEnumerable.call(e, a) && (o[a
] = e[a
])
} return o
}(e, i); return n.a.createElement("svg", r({ width: 18, height: 18, viewBox: "0 0 18 18", fill: "none", ref: t
}, o), a ? n.a.createElement("title",
null, a) : null, l || (l = n.a.createElement("path",
{ d: "M9 0C4.032 0 0 4.032 0 9C0 13.968 4.032 18 9 18C13.968 18 18 13.968 18 9C18 4.032 13.968 0 9 0ZM13.5 9.9H9.9V13.5H8.1V9.9H4.5V8.1H8.1V4.5H9.9V8.1H13.5V9.9Z", fill: "#088466"
})))
}, s = n.a.forwardRef((e, t) => n.a.createElement(d, r({ svgRef: t
}, e))); a.p
},
918: function (e, t, a) {
"use strict"; a.d(t,
"a", (function () { return s
})); var l, o = a(0), n = a.n(o); const i = [
"svgRef",
"title"
]; function r() { return (r = Object.assign ? Object.assign.bind() : function (e) { for (var t = 1; t < arguments.length; t++) { var a = arguments[t
]; for (var l in a) ({}).hasOwnProperty.call(a, l) && (e[l
] = a[l
])
} return e
}).apply(null, arguments)
} const d = e => { let { svgRef: t, title: a
} = e, o = function (e, t) { if (null == e) return {}; var a, l, o = function (e, t) { if (null == e) return {}; var a = {}; for (var l in e) if ({}.hasOwnProperty.call(e, l)) { if (-1 !== t.indexOf(l)) continue; a[l
] = e[l
]
} return a
}(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (l = 0; l < n.length; l++)a = n[l
],
-1 === t.indexOf(a) && {}.propertyIsEnumerable.call(e, a) && (o[a
] = e[a
])
} return o
}(e, i); return n.a.createElement("svg", r({ width: 18, height: 18, viewBox: "0 0 18 18", fill: "none", ref: t
}, o), a ? n.a.createElement("title",
null, a) : null, l || (l = n.a.createElement("path",
{ d: "M9 0C4.032 0 0 4.032 0 9C0 13.968 4.032 18 9 18C13.968 18 18 13.968 18 9C18 4.032 13.968 0 9 0ZM13.5 9.9H4.5V8.1H13.5V9.9Z", fill: "#088466"
})))
}, s = n.a.forwardRef((e, t) => n.a.createElement(d, r({ svgRef: t
}, e))); a.p
},
919: function (e, t, a) {
"use strict"; a.d(t,
"b", (function () { return n
})); var l = a(224), o = a.n(l); t.a = (e, t, a) => { const l = e => { try { return o.a.AES.decrypt(e,
"wkEQ=9(@Bz7YT#3!lMx").toString(o.a.enc.Utf8)
} catch (t) { return ""
}
}, n = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"), i = localStorage.getItem("customer_hash"), r = localStorage.getItem("csc_code"); let d = ""; d = n ? r : i; let s = JSON.parse(localStorage.getItem("slots")); s.map(e => { var t; return e.external_reference_id = "".concat(e.external_reference_id).concat(null === (t = e.items[
0
]) || void 0 === t ? void 0 : t.sku)
}); let c, u, v, m, p, g = JSON.parse(localStorage.getItem("selAddr")); var f, y, E, h, S, I, N, O, b, _, D, C, P, T, k, w, A, R, L, F, j, x, M, B; a ? (c = e.addresses[
0
].postalCode, u = e.addresses[
0
].latitude.toString(), v = e.addresses[
0
].longitude.toString(), m = e.addresses[
0
].city.name, p = "".concat(null === e || void 0 === e || null === (f = e.addresses[
0
]) || void 0 === f ? void 0 : f.line1,
", ").concat(null === e || void 0 === e || null === (y = e.addresses[
0
]) || void 0 === y ? void 0 : y.line2)) : (c = n ? null === g || void 0 === g || null === (E = g.shippingAddress) || void 0 === E ? void 0 : E.addAddressPinCode : null === g || void 0 === g || null === (h = g.shippingAddress) || void 0 === h ? void 0 : h.pinCode, u = n ? (null === g || void 0 === g || null === (S = g.shippingAddress) || void 0 === S ? void 0 : S.shipLat) ? null === g || void 0 === g || null === (I = g.shippingAddress) || void 0 === I ? void 0 : I.shipLat : "": (null === g || void 0 === g || null === (N = g.shippingAddress) || void 0 === N || null === (O = N.gpsCoordinates) || void 0 === O ? void 0 : O.latitude) ? null === g || void 0 === g || null === (b = g.shippingAddress) || void 0 === b || null === (_ = b.gpsCoordinates) || void 0 === _ ? void 0 : _.latitude : "", v = n ? (null === g || void 0 === g || null === (D = g.shippingAddress) || void 0 === D ? void 0 : D.shipLng) ? null === g || void 0 === g || null === (C = g.shippingAddress) || void 0 === C ? void 0 : C.shipLng : "": (null === g || void 0 === g || null === (P = g.shippingAddress) || void 0 === P || null === (T = P.gpsCoordinates) || void 0 === T ? void 0 : T.longitude) ? null === g || void 0 === g || null === (k = g.shippingAddress) || void 0 === k || null === (w = k.gpsCoordinates) || void 0 === w ? void 0 : w.longitude : "", m = n ? null === g || void 0 === g || null === (A = g.shippingAddress) || void 0 === A ? void 0 : A.addAddressCity : null === g || void 0 === g || null === (R = g.shippingAddress) || void 0 === R ? void 0 : R.cityTown, p = n ? "".concat(null === g || void 0 === g || null === (L = g.shippingAddress) || void 0 === L ? void 0 : L.addAddressLine1,
", ").concat(null === g || void 0 === g || null === (F = g.shippingAddress) || void 0 === F ? void 0 : F.addAddressLine2,
", ").concat(null === g || void 0 === g || null === (j = g.shippingAddress) || void 0 === j ? void 0 : j.addAddressLine3) : "".concat(null === g || void 0 === g || null === (x = g.shippingAddress) || void 0 === x ? void 0 : x.house,
", ").concat(null === g || void 0 === g || null === (M = g.shippingAddress) || void 0 === M ? void 0 : M.landmark,
", ").concat(null === g || void 0 === g || null === (B = g.shippingAddress) || void 0 === B ? void 0 : B.addressLine)); let G, V, U, H, J; var W; a ? (V = t.firstName, J = t.lastName, U = null === e || void 0 === e || null === (W = e.addresses[
0
]) || void 0 === W ? void 0 : W.phone, H = t.emailId) : localStorage.getItem("cr-cache:user-data") && (G = JSON.parse(localStorage.getItem("cr-cache:user-data")), V = n ? G.customerInfo.firstName : l(G.customerInfo.firstName), J = n ? G.customerInfo.lastName : l(G.customerInfo.lastName), U = n ? G.customerInfo.phone : l(G.customerInfo.phone) || sessionStorage.getItem("telNumber"), H = n ? G.customerInfo.email : l(G.customerInfo.email) || sessionStorage.getItem("eMail")); return { location: { pincode: parseInt(c), lat: u, lon: v
}, member: { external_member_id: d, first_name: V, last_name: J, email: H, mobile_no: U
}, address: { house_no: " ", apartment_name: " ", area: " ", pincode: c, lat: u, lon: v, address1: p, landmark: " ", city: m
}, orders: s
}
}; const n = (e, t) => { var a, l, n, i, r, d, s, c, u, v, m, p; const g = e => { try { return o.a.AES.decrypt(e,
"wkEQ=9(@Bz7YT#3!lMx").toString(o.a.enc.Utf8)
} catch (t) { return ""
}
}, f = "undefined" !== typeof Storage && "true" === localStorage.getItem("isCSC"), y = localStorage.getItem("customer_hash"), E = localStorage.getItem("csc_code"); let h = ""; h = f ? E : y; const S = null === e || void 0 === e || null === (a = e.PersonInfoShipTo) || void 0 === a ? void 0 : a.ZipCode, I = (null === e || void 0 === e || null === (l = e.PersonInfoShipTo) || void 0 === l ? void 0 : l.Latitude) && (null === e || void 0 === e || null === (n = e.PersonInfoShipTo) || void 0 === n ? void 0 : n.Latitude) || "", N = (null === e || void 0 === e || null === (i = e.PersonInfoShipTo) || void 0 === i ? void 0 : i.Longitude) && (null === e || void 0 === e || null === (r = e.PersonInfoShipTo) || void 0 === r ? void 0 : r.Longitude) || ""; let O, b, _, D, C; localStorage.getItem("cr-cache:user-data") && (O = JSON.parse(localStorage.getItem("cr-cache:user-data")), b = f ? O.customerInfo.firstName : g(O.customerInfo.firstName), C = f ? O.customerInfo.lastName : g(O.customerInfo.lastName), C = null, _ = f ? O.customerInfo.phone : g(O.customerInfo.phone) || sessionStorage.getItem("telNumber"), D = f ? O.customerInfo.email : g(O.customerInfo.email) || sessionStorage.getItem("eMail")); return { location: { pincode: parseInt(S), lat: I, lon: N
}, member: { external_member_id: h, first_name: b, last_name: C, email: D, mobile_no: _
}, address: { house_no: " ", apartment_name: " ", area: " ", pincode: S, lat: I, lon: N, address1: "".concat(null === e || void 0 === e || null === (d = e.PersonInfoShipTo) || void 0 === d || null === (s = d.Extn) || void 0 === s ? void 0 : s.IRLAddressLine1,
", ").concat(null === e || void 0 === e || null === (c = e.PersonInfoShipTo) || void 0 === c || null === (u = c.Extn) || void 0 === u ? void 0 : u.IRLAddressLine2,
", ").concat(null === e || void 0 === e || null === (v = e.PersonInfoShipTo) || void 0 === v || null === (m = v.Extn) || void 0 === m ? void 0 : m.IRLAddressLine3), landmark: " ", city: null === e || void 0 === e || null === (p = e.PersonInfoShipTo) || void 0 === p ? void 0 : p.City
}, orders: t
}
}
},
920: function (e, t, a) {
"use strict"; a.d(t,
"b", (function () { return i
})), a.d(t,
"c", (function () { return r
})), a.d(t,
"a", (function () { return d
})); var l = a(11), o = a(16), n = a(1); async function i() { const e = localStorage.getItem("access_token"), t = { client_id: n.a.CLIENT_ID, Authorization: "Bearer ".concat(e)
}; try { const e = o.vb; return await l.dapiHttpService.get(e,
{ headers: t
})
} catch (a) { return { err: a
}
}
} async function r(e) { const t = localStorage.getItem("access_token"), a = { client_id: n.a.CLIENT_ID, Authorization: "Bearer ".concat(t), store_id: n.a.STORE_ID
}; try { const t = o.bd + e; return await l.dapiHttpService.get(t,
{ headers: a
})
} catch (i) { return { err: i
}
}
} async function d() { const e = localStorage.getItem("access_token"), t = { client_id: n.a.CLIENT_ID, Authorization: "Bearer ".concat(e), store_id: n.a.STORE_ID
}; try { const e = o.J; return await l.dapiHttpService.get(e,
{ headers: t
})
} catch (a) { return { err: a
}
}
}
},
958: function (e, t, a) {
"use strict"; a.d(t,
"a", (function () { return v
})); var l, o, n, i, r = a(0), d = a.n(r); const s = [
"svgRef",
"title"
]; function c() { return (c = Object.assign ? Object.assign.bind() : function (e) { for (var t = 1; t < arguments.length; t++) { var a = arguments[t
]; for (var l in a) ({}).hasOwnProperty.call(a, l) && (e[l
] = a[l
])
} return e
}).apply(null, arguments)
} const u = e => { let { svgRef: t, title: a
} = e, r = function (e, t) { if (null == e) return {}; var a, l, o = function (e, t) { if (null == e) return {}; var a = {}; for (var l in e) if ({}.hasOwnProperty.call(e, l)) { if (-1 !== t.indexOf(l)) continue; a[l
] = e[l
]
} return a
}(e, t); if (Object.getOwnPropertySymbols) { var n = Object.getOwnPropertySymbols(e); for (l = 0; l < n.length; l++)a = n[l
],
-1 === t.indexOf(a) && {}.propertyIsEnumerable.call(e, a) && (o[a
] = e[a
])
} return o
}(e, s); return d.a.createElement("svg", c({ width: 20, height: 20, viewBox: "0 0 20 20", fill: "none", ref: t
}, r), a ? d.a.createElement("title",
null, a) : null, l || (l = d.a.createElement("path",
{ d: "M6.25 12.5H16.25C16.5952 12.5 16.875 12.2202 16.875 11.875V3.75C16.875 3.40482 16.5952 3.125 16.25 3.125H7.5C7.15482 3.125 6.875 3.40482 6.875 3.75V4.375", stroke: "#353535", strokeLinecap: "round", strokeLinejoin: "round"
})), o || (o = d.a.createElement("path",
{ d: "M8.125 10.625L6.25 12.5L8.125 14.375", stroke: "#353535", strokeLinecap: "round", strokeLinejoin: "round"
})), n || (n = d.a.createElement("path",
{ d: "M13.75 7.5H3.75C3.40482 7.5 3.125 7.77982 3.125 8.125V16.25C3.125 16.5952 3.40482 16.875 3.75 16.875H12.5C12.8452 16.875 13.125 16.5952 13.125 16.25V15.625", stroke: "#353535", strokeLinecap: "round", strokeLinejoin: "round"
})), i || (i = d.a.createElement("path",
{ d: "M11.875 9.375L13.75 7.5L11.875 5.625", stroke: "#353535", strokeLinecap: "round", strokeLinejoin: "round"
})))
}, v = d.a.forwardRef((e, t) => d.a.createElement(u, c({ svgRef: t
}, e))); a.p
}
}
]);

e = [
    { offset_in_minutes: Q, external_product_id: t[
            0
        ], mrp: (null === l || void 0 === l || null === (N = l.totalPriceWithoutDiscount) || void 0 === N ? void 0 : N.value).toString(), sp: (null === l || void 0 === l || null === (O = l.totalPrice) || void 0 === O ? void 0 : O.value).toString(), quantity: null === l || void 0 === l ? void 0 : l.quantity, sku: null === l || void 0 === l ? void 0 : l.entryNumber
    },
    { offset_in_minutes: Q, external_product_id: t[
            1
        ], mrp: (null === l || void 0 === l || null === (b = l.totalPriceWithoutDiscount) || void 0 === b ? void 0 : b.value).toString(), sp: (null === l || void 0 === l || null === (_ = l.totalPrice) || void 0 === _ ? void 0 : _.value).toString(), quantity: null === l || void 0 === l ? void 0 : l.quantity, sku: null === l || void 0 === l ? void 0 : l.entryNumber
    }
]
} else { var C, P, T; e = [
    { offset_in_minutes: Q, external_product_id: null === l || void 0 === l || null === (C = l.product) || void 0 === C ? void 0 : C.code, mrp: (null === l || void 0 === l || null === (P = l.totalPriceWithoutDiscount) || void 0 === P ? void 0 : P.value).toString(), sp: (null === l || void 0 === l || null === (T = l.totalPrice) || void 0 === T ? void 0 : T.value).toString(), quantity: null === l || void 0 === l ? void 0 : l.quantity, sku: null === l || void 0 === l ? void 0 : l.entryNumber
    }
]
} u = [
{ order_type: "Normal", fulfillmentType: "HDEL", external_reference_id: null === l || void 0 === l || null === (S = l.product) || void 0 === S ? void 0 : S.code, external_fc_id: K, package: null, items: e, slots: { slot_date: J, slot_definition_id: parseInt(null === Y || void 0 === Y ? void 0 : Y.slotDefinitionId), template_slot_id: parseInt(null === Y || void 0 === Y ? void 0 : Y.templateSlotId)
    }
}
]
} if (He.findIndex(r) < 0) He = 0 == He.length ? [...u
] : [...He, ...u
]; else { let e = He.findIndex(r); (null === l || void 0 === l ? void 0 : l.hasOwnProperty("exchangeAmount")) ? (He[e
] = u[
0
], He[e + 1
] = u[
1
]) : He[e
] = u[
0
]
} localStorage.setItem("slots", JSON.stringify(He)); let k = s, w = s.findIndex(e => (null === e || void 0 === e ? void 0 : e.id) == (null === i || void 0 === i ? void 0 : i.id) && (null === e || void 0 === e ? void 0 : e.cartEntryId) == (null === i || void 0 === i ? void 0 : i.cartEntryId)); w < 0 ? k.push(i) : k[w
] = i, c(k), localStorage.setItem("sltArr", JSON.stringify(s)),
"N" == (arguments.length <= 1 ? void 0 : arguments[
1
]) && Je < (null === d || void 0 === d ? void 0 : d.length) - 1 ? Oe() : "N" == (arguments.length <= 1 ? void 0 : arguments[
1
]) && Je == (null === d || void 0 === d ? void 0 : d.length) - 1 && he()
}, Oe = () => { if (ae(!1), Je < (null === d || void 0 === d ? void 0 : d.length) - 1) { var e, t, a, l, o, n, i, r, c; Je += 1, oe(d[Je
]), C({ time: null === (e = s[Je
]) || void 0 === e ? void 0 : e.timeId, slot: null === (t = s[Je
]) || void 0 === t ? void 0 : t.dateId
}), W(null === (a = M[
null === (o = s[Je
]) || void 0 === o ? void 0 : o.dateId
]) || void 0 === a || null === (l = a.deliveryDate) || void 0 === l ? void 0 : l.slotDate), q(null === (n = M[
null === (r = s[Je
]) || void 0 === r ? void 0 : r.dateId
]) || void 0 === n || null === (i = n.deliveryDate) || void 0 === i ? void 0 : i.slots[
null === (c = s[Je
]) || void 0 === c ? void 0 : c.timeId
]); let u = document.getElementById("left"); if (u && u.classList.add("active"), Je == (null === d || void 0 === d ? void 0 : d.length) - 1) { let e = document.getElementById("right"); e && e.classList.add("disable")
}
}
}, be = () => { let e = [], t = JSON.parse(localStorage.getItem("slots")), a = JSON.parse(localStorage.getItem("sltArr")); t.map(e => { var t; return e.external_reference_id = "".concat(e.external_reference_id).concat(null === (t = e.items[
0
]) || void 0 === t ? void 0 : t.sku)
}); const l = Object(Ue.a)(); Object(z.r)(l).then(l => { if ("success" == l.status) { var o; v(!0); let n = l.data, i = !0, r = n.reservations.map(e => e.external_reference_id).filter((e, t, a) => a.indexOf(e) !== t); const d = n.reservations.filter(e => r.includes(e.external_reference_id)); n.reservations.map((l, o) => { let n = a.findIndex(e => "".concat(null === e || void 0 === e ? void 0 : e.id).concat(null === e || void 0 === e ? void 0 : e.cartEntryId) == (null === l || void 0 === l ? void 0 : l.external_reference_id)); if (!(n < 0)) if ((null === d || void 0 === d ? void 0 : d.length) > 0 && d[
        0
    ].external_reference_id == l.external_reference_id && i) { var r; i = !1; let l = {}; if ("Trade - In" == (null === (r = d[
            0
        ]) || void 0 === r ? void 0 : r.order_type)) { let e = a[n
            ].time.startTime.split(""), o = e[
                0
            ] + "T" + e[
                1
            ] + ": 00", i = a[n
            ].time.endTime.split(""), r = i[
                0
            ] + "T" + i[
                1
            ] + ": 00"; l.slotReservationId = d[
                0
            ].reservation_id, l.cartEntryId = a[n
            ].cartEntryId, l.deliveryTimeFrom = o, l.deliveryTimeTo = r, l.slotLmdFcId = t[n
            ].external_fc_id, l.slotOrderType = d[
                0
            ].order_type, l.tradeInSlotReservationId = d[
                1
            ].reservation_id, l.tradeInDeliveryTimeFrom = o, l.tradeInDeliveryTimeTo = r, l.tradeInSlotLmdFcId = t[n
            ].external_fc_id, l.tradeInSlotOrderType = d[
                1
            ].order_type
        } else { let e = a[n
            ].time.startTime.split(""), o = e[
                0
            ] + "T" + e[
                1
            ] + ": 00", i = a[n
            ].time.endTime.split(""), r = i[
                0
            ] + "T" + i[
                1
            ] + ": 00"; l.slotReservationId = d[
                1
            ].reservation_id, l.cartEntryId = a[n
            ].cartEntryId, l.deliveryTimeFrom = o, l.deliveryTimeTo = r, l.slotLmdFcId = t[n
            ].external_fc_id, l.slotOrderType = d[
                1
            ].order_type, l.tradeInSlotReservationId = d[
                0
            ].reservation_id, l.tradeInDeliveryTimeFrom = o, l.tradeInDeliveryTimeTo = r, l.tradeInSlotLmdFcId = t[n
            ].external_fc_id, l.tradeInSlotOrderType = d[
                0
            ].order_type
        } e.push(l)
    } else if ("Trade - In" != l.order_type && "Pickup" != l.order_type) { let o = a[n
        ].time.startTime.split(""), i = o[
            0
        ] + "T" + o[
            1
        ] + ": 00", r = a[n
        ].time.endTime.split(""), d = r[
            0
        ] + "T" + r[
            1
        ] + ": 00", s = { slotReservationId: l.reservation_id, cartEntryId: a[n
            ].cartEntryId, deliveryTimeFrom: i, deliveryTimeTo: d, slotLmdFcId: t[n
            ].external_fc_id, slotOrderType: l.order_type
        }; e.push(s)
    }
}); let s = "undefined" !== typeof Storage && localStorage.getItem("customer_hash"); const c = localStorage.getItem("csc_code"); let u = ""; u = me ? c : s; let m = null === (o = Object(N.a)(localStorage.getItem("cr - cache: user - data"),
"token").wishListInfo.cartWsDto) || void 0 === o ? void 0 : o.code, p = " / user / allchannels / v1 / ".concat(s,
" / checkout / ").concat(m,
" / slotReservationId ? refreshCart = false"); Object(z.u)(e, p).then(e => {
    "error" === e.status && sessionStorage.calledFromTDNative && Object(N.k)("ERROR", e.statusCode,
    "",
    "",
    { service_name: "updateReservationID"
    })
}).catch(() => {})
} else "error" === l.status && 2040 === l.data.errors[
0
].code && (() => { const e = JSON.parse(localStorage.getItem("selAddr")), t = f; if (t && t.entries && t.entries.length > 0) { let f = 0; const _ = []; for (let r = 0; r < t.entries.length; r++) { var a, l, o, n, i; const s = t.entries[r
        ].product.code, m = t.entries[r
        ].hasOwnProperty("exchangeAmount") ? "trade -in ": "normal", p = t.entries[r
        ].quantity, g = (null === (a = t.entries[r
        ].product) || void 0 === a ? void 0 : a.applianceType) ? null === (l = t.entries[r
        ].product) || void 0 === l ? void 0 : l.applianceType : "", S = (null === (o = t.entries[r
        ].product) || void 0 === o ? void 0 : o.wiiFlag) ? "Y": "N", N = [
            "HDEL",
            "STOR",
            "SDEL"
        ]; let D = []; if ("ZPAK" === (null === t || void 0 === t || null === (n = t.entries[r
        ]) || void 0 === n || null === (i = n.product) || void 0 === i ? void 0 : i.SAP_MATERIAL_TYPE)) { var d, c; const e = (null === t || void 0 === t || null === (d = t.entries[r
            ]) || void 0 === d || null === (c = d.product) || void 0 === c ? void 0 : c.SAP_BOM_DESC).split(",
");